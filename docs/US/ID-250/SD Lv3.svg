<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1235px" preserveAspectRatio="none" style="width:1929px;height:1235px;background:#FFFFFF;" version="1.1" viewBox="0 0 1929 1235" width="1929px" zoomAndPan="magnify"><defs/><g><rect fill="#ADD8E6" height="1223.5781" style="stroke:#181818;stroke-width:0.5;" width="1871.5" x="51.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="138" x="918.25" y="19.4951">Campus Management</text><rect fill="#00FFFF" height="1202.2266" style="stroke:#181818;stroke-width:0.5;" width="363" x="51.5" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="189" x="138.5" y="40.8467">Framework And Drivers Layer</text><rect fill="#77FFAA" height="1202.2266" style="stroke:#181818;stroke-width:0.5;" width="370" x="522.5" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="156" x="629.5" y="40.8467">Interface Adapters Layer</text><rect fill="#FF6666" height="1202.2266" style="stroke:#181818;stroke-width:0.5;" width="194" x="1422" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="170" x="1434" y="40.8467">Application Business Rules</text><rect fill="#EEDDAA" height="1202.2266" style="stroke:#181818;stroke-width:0.5;" width="186" x="1737" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="162" x="1749" y="40.8467">Enterprise Business Rules</text><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="14" x2="14" y1="80.3125" y2="1190.9688"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="87" x2="87" y1="80.3125" y2="1190.9688"/><rect fill="#FFFFFF" height="1062.3047" style="stroke:#181818;stroke-width:1.0;" width="10" x="82" y="110.6641"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="202" x2="202" y1="80.3125" y2="1190.9688"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="197" y="596.2891"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="197" y="899.8047"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="348" x2="348" y1="80.3125" y2="1190.9688"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="343" y="232.0703"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="343" y="353.4766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="473.5" x2="473.5" y1="80.3125" y2="1190.9688"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="564.5" x2="564.5" y1="80.3125" y2="1190.9688"/><rect fill="#FFFFFF" height="1001.6016" style="stroke:#181818;stroke-width:1.0;" width="10" x="559.5" y="141.0156"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="683" x2="683" y1="80.3125" y2="1190.9688"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="678" y="565.9375"/><rect fill="#FFFFFF" height="151.7578" style="stroke:#181818;stroke-width:1.0;" width="10" x="678" y="808.75"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="829" x2="829" y1="80.3125" y2="1190.9688"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="824" y="201.7188"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="824" y="323.125"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="949" x2="949" y1="80.3125" y2="1190.9688"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1049" x2="1049" y1="80.3125" y2="1190.9688"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1160" x2="1160" y1="80.3125" y2="1190.9688"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1155" y="1021.2109"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1328" x2="1328" y1="80.3125" y2="1190.9688"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="1323" y="444.5313"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1323" y="839.1016"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="1323" y="990.8594"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1519" x2="1519" y1="80.3125" y2="1190.9688"/><rect fill="#FFFFFF" height="1019.6016" style="stroke:#181818;stroke-width:1.0;" width="10" x="1514" y="171.3672"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1830" x2="1830" y1="80.3125" y2="1190.9688"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1825" y="474.8828"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="1825" y="687.3438"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="18" x="5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="12" y="69.2363"> </text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="63" x="55.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="62.5" y="69.2363">Routing</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147" x="128.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="135.5" y="69.2363">Passage Persistence</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="285.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="292.5" y="69.2363">Floor Persistence</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="430.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="437.5" y="69.2363">Data Model</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="526.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="533.5" y="69.2363">Controller</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="612.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="619.5" y="69.2363">Passage Repository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="769.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="776.5" y="69.2363">Floor Repository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="908.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="915.5" y="69.2363">Floor DTO</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99" x="999.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="1006.5" y="69.2363">Floor Mapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="1108.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="1115.5" y="69.2363">Passage DTO</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="121" x="1267.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="1274.5" y="69.2363">Passage Mapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120" x="1459" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="1466" y="69.2363">Passage Service</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69" x="1795.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="1802.5" y="69.2363">Passage</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="18" x="5" y="1190.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="12" y="1212.502"> </text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="63" x="55.5" y="1190.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="62.5" y="1212.502">Routing</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147" x="128.5" y="1190.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="135.5" y="1212.502">Passage Persistence</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="285.5" y="1190.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="292.5" y="1212.502">Floor Persistence</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="430.5" y="1190.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="437.5" y="1212.502">Data Model</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="526.5" y="1190.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="533.5" y="1212.502">Controller</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="612.5" y="1190.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="619.5" y="1212.502">Passage Repository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="769.5" y="1190.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="776.5" y="1212.502">Floor Repository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="908.5" y="1190.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="915.5" y="1212.502">Floor DTO</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99" x="999.5" y="1190.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="1006.5" y="1212.502">Floor Mapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="1108.5" y="1190.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="1115.5" y="1212.502">Passage DTO</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="121" x="1267.5" y="1190.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="1274.5" y="1212.502">Passage Mapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120" x="1459" y="1190.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="1466" y="1212.502">Passage Service</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69" x="1795.5" y="1190.9688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="1802.5" y="1212.502">Passage</text><ellipse cx="10.5" cy="109.9141" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="70,106.6641,80,110.6641,70,114.6641,74,110.6641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="15" x2="76" y1="110.6641" y2="110.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="20" x="18" y="105.8076">Put</text><polygon fill="#181818" points="547.5,137.0156,557.5,141.0156,547.5,145.0156,551.5,141.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="92" x2="553.5" y1="141.0156" y2="141.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="99" y="136.1592">updatePassage(req, res, next)</text><polygon fill="#181818" points="1502,167.3672,1512,171.3672,1502,175.3672,1506,171.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="569.5" x2="1508" y1="171.3672" y2="171.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="300" x="576.5" y="166.5107">updatePassage(oldPassageDTO, newPassageDTO)</text><polygon fill="#181818" points="845,197.7188,835,201.7188,845,205.7188,841,201.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="839" x2="1513" y1="201.7188" y2="201.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="447" x="851" y="196.8623">findByCode(newPassageDTO.buildingCode1, newPassageDTO.floorNumber1)</text><polygon fill="#181818" points="364,228.0703,354,232.0703,364,236.0703,360,232.0703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="358" x2="823" y1="232.0703" y2="232.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="447" x="370" y="227.2139">findByCode(newPassageDTO.buildingCode1, newPassageDTO.floorNumber1)</text><polygon fill="#181818" points="812,258.4219,822,262.4219,812,266.4219,816,262.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="353" x2="818" y1="262.4219" y2="262.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="360" y="257.5654">floor1</text><polygon fill="#181818" points="1502,288.7734,1512,292.7734,1502,296.7734,1506,292.7734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="834" x2="1508" y1="292.7734" y2="292.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="841" y="287.917">floor1</text><polygon fill="#181818" points="845,319.125,835,323.125,845,327.125,841,323.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="839" x2="1513" y1="323.125" y2="323.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="447" x="851" y="318.2686">findByCode(newPassageDTO.buildingCode2, newPassageDTO.floorNumber2)</text><polygon fill="#181818" points="364,349.4766,354,353.4766,364,357.4766,360,353.4766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="358" x2="823" y1="353.4766" y2="353.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="447" x="370" y="348.6201">findByCode(newPassageDTO.buildingCode2, newPassageDTO.floorNumber2)</text><polygon fill="#181818" points="812,379.8281,822,383.8281,812,387.8281,816,383.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="353" x2="818" y1="383.8281" y2="383.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="360" y="378.9717">floor2</text><polygon fill="#181818" points="1502,410.1797,1512,414.1797,1502,418.1797,1506,414.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="834" x2="1508" y1="414.1797" y2="414.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="841" y="409.3232">floor2</text><polygon fill="#181818" points="1344,440.5313,1334,444.5313,1344,448.5313,1340,444.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1338" x2="1513" y1="444.5313" y2="444.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="1350" y="439.6748">toDomain(oldPassageDTO)</text><polygon fill="#181818" points="1813,470.8828,1823,474.8828,1813,478.8828,1817,474.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1333" x2="1819" y1="474.8828" y2="474.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="1340" y="470.0264">Passage(oldPassageDTO)</text><polygon fill="#181818" points="1344,501.2344,1334,505.2344,1344,509.2344,1340,505.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1338" x2="1824" y1="505.2344" y2="505.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="1350" y="500.3779">passageOld</text><polygon fill="#181818" points="1502,531.5859,1512,535.5859,1502,539.5859,1506,535.5859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1333" x2="1508" y1="535.5859" y2="535.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="1340" y="530.7295">passageOld</text><polygon fill="#181818" points="699,561.9375,689,565.9375,699,569.9375,695,565.9375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="693" x2="1513" y1="565.9375" y2="565.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="705" y="561.0811">findByCodes(passageOld)</text><polygon fill="#181818" points="218,592.2891,208,596.2891,218,600.2891,214,596.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="212" x2="677" y1="596.2891" y2="596.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="224" y="591.4326">findByCodes(passageOld)</text><polygon fill="#181818" points="666,622.6406,676,626.6406,666,630.6406,670,626.6406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="207" x2="672" y1="626.6406" y2="626.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="214" y="621.7842">passage</text><polygon fill="#181818" points="1502,652.9922,1512,656.9922,1502,660.9922,1506,656.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="688" x2="1508" y1="656.9922" y2="656.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="695" y="652.1357">passage</text><polygon fill="#181818" points="1813,683.3438,1823,687.3438,1813,691.3438,1817,687.3438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1524" x2="1819" y1="687.3438" y2="687.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282" x="1531" y="682.4873">buildingCode1 = newPassageDTO.buildingCode1</text><polygon fill="#181818" points="1813,713.6953,1823,717.6953,1813,721.6953,1817,717.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1524" x2="1819" y1="717.6953" y2="717.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282" x="1531" y="712.8389">buildingCode2 = newPassageDTO.buildingCode2</text><polygon fill="#181818" points="1813,744.0469,1823,748.0469,1813,752.0469,1817,748.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1524" x2="1819" y1="748.0469" y2="748.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="272" x="1531" y="743.1904">floorNumber1 = newPassageDTO.floorNumber1</text><polygon fill="#181818" points="1813,774.3984,1823,778.3984,1813,782.3984,1817,778.3984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1524" x2="1819" y1="778.3984" y2="778.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="272" x="1531" y="773.542">floorNumber2 = newPassageDTO.floorNumber2</text><polygon fill="#181818" points="699,804.75,689,808.75,699,812.75,695,808.75" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="693" x2="1513" y1="808.75" y2="808.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="705" y="803.8936">save(passage)</text><polygon fill="#181818" points="1311,835.1016,1321,839.1016,1311,843.1016,1315,839.1016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="688" x2="1317" y1="839.1016" y2="839.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="695" y="834.2451">toPersistence(passage)</text><polygon fill="#181818" points="699,865.4531,689,869.4531,699,873.4531,695,869.4531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="693" x2="1322" y1="869.4531" y2="869.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="705" y="864.5967">passageDocument</text><polygon fill="#181818" points="218,895.8047,208,899.8047,218,903.8047,214,899.8047" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="212" x2="677" y1="899.8047" y2="899.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="224" y="894.9482">save(passageDocument)</text><polygon fill="#181818" points="666,926.1563,676,930.1563,666,934.1563,670,930.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="207" x2="672" y1="930.1563" y2="930.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="214" y="925.2998">Success</text><polygon fill="#181818" points="1502,956.5078,1512,960.5078,1502,964.5078,1506,960.5078" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="688" x2="1508" y1="960.5078" y2="960.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="695" y="955.6514">passage</text><polygon fill="#181818" points="1344,986.8594,1334,990.8594,1344,994.8594,1340,990.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1338" x2="1513" y1="990.8594" y2="990.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="1350" y="986.0029">toDTO(passage)</text><polygon fill="#181818" points="1176,1017.2109,1166,1021.2109,1176,1025.2109,1172,1021.2109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1170" x2="1322" y1="1021.2109" y2="1021.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="1182" y="1016.3545">PassageDTO(passage)</text><polygon fill="#181818" points="1311,1047.5625,1321,1051.5625,1311,1055.5625,1315,1051.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1165" x2="1317" y1="1051.5625" y2="1051.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="1172" y="1046.7061">passageDTO</text><polygon fill="#181818" points="1502,1077.9141,1512,1081.9141,1502,1085.9141,1506,1081.9141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1333" x2="1508" y1="1081.9141" y2="1081.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="1340" y="1077.0576">passageDTO</text><polygon fill="#181818" points="580.5,1108.2656,570.5,1112.2656,580.5,1116.2656,576.5,1112.2656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="574.5" x2="1513" y1="1112.2656" y2="1112.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="586.5" y="1107.4092">passageDTO</text><polygon fill="#181818" points="103,1138.6172,93,1142.6172,103,1146.6172,99,1142.6172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="97" x2="558.5" y1="1142.6172" y2="1142.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="109" y="1137.7607">passageDTO</text><ellipse cx="10.5" cy="1172.2188" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="27.5,1168.9688,17.5,1172.9688,27.5,1176.9688,23.5,1172.9688" style="stroke:#181818;stroke-width:1.0;"/><ellipse cx="81.5" cy="1172.2188" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="25.5" x2="77" y1="1172.9688" y2="1172.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="28" y="1168.1123">floorDTO[]</text><!--MD5=[84fcf34134050d42710d2a573e6290fd]
@startuml SD Lv3

!pragma teoz true

participant " "
box "Campus Management" #LightBlue

    box "Framework And Drivers Layer" #00ffff
        participant Routing
        participant "Passage Persistence" as PassagePers
        participant "Floor Persistence" as FloorPers
    end box

    participant "Data Model" as Data
    box "Interface Adapters Layer" #77ffaa
        participant Controller
        participant "Passage Repository" as PassageRepository
        participant "Floor Repository" as FloorRepository
    end box

    participant "Floor DTO" as FloorDTO
    participant "Floor Mapper" as FloorMapper
    participant "Passage DTO" as PassageDTO
    participant "Passage Mapper" as PassageMapper
    box "Application Business Rules" #ff6666
        participant "Passage Service" as PassageService
    end box

    box "Enterprise Business Rules" #eeddaa
        participant Passage
    end box
end box


[o-> Routing : Put
activate Routing

    Routing -> Controller : updatePassage(req, res, next)
    activate Controller

        Controller -> PassageService : updatePassage(oldPassageDTO, newPassageDTO)
        activate PassageService

            PassageService -> FloorRepository : findByCode(newPassageDTO.buildingCode1, newPassageDTO.floorNumber1)
            activate FloorRepository

                FloorRepository -> FloorPers : findByCode(newPassageDTO.buildingCode1, newPassageDTO.floorNumber1)
                activate FloorPers

                FloorPers - -> FloorRepository : floor1
                deactivate FloorPers
            
            FloorRepository - -> PassageService : floor1
            deactivate FloorRepository

            PassageService -> FloorRepository : findByCode(newPassageDTO.buildingCode2, newPassageDTO.floorNumber2)
            activate FloorRepository

                FloorRepository -> FloorPers : findByCode(newPassageDTO.buildingCode2, newPassageDTO.floorNumber2)
                activate FloorPers

                FloorPers - -> FloorRepository : floor2
                deactivate FloorPers
            
            FloorRepository - -> PassageService : floor2
            deactivate FloorRepository

            PassageService -> PassageMapper : toDomain(oldPassageDTO)
            activate PassageMapper

                PassageMapper -> Passage : Passage(oldPassageDTO)
                activate Passage

                Passage - -> PassageMapper : passageOld
                deactivate Passage

            PassageMapper - -> PassageService : passageOld
            deactivate PassageMapper
            
            PassageService -> PassageRepository : findByCodes(passageOld)
            activate PassageRepository

                PassageRepository -> PassagePers : findByCodes(passageOld)
                activate PassagePers

                PassagePers - -> PassageRepository : passage
                deactivate PassagePers

            PassageRepository - -> PassageService : passage
            deactivate PassageRepository

            PassageService -> Passage: buildingCode1 = newPassageDTO.buildingCode1
            activate Passage
            PassageService -> Passage: buildingCode2 = newPassageDTO.buildingCode2
            PassageService -> Passage: floorNumber1 = newPassageDTO.floorNumber1
            PassageService -> Passage: floorNumber2 = newPassageDTO.floorNumber2
            deactivate Passage

            PassageService -> PassageRepository : save(passage)
            activate PassageRepository

                PassageRepository -> PassageMapper: toPersistence(passage)
                activate PassageMapper
                
                PassageMapper - -> PassageRepository : passageDocument
                deactivate PassageMapper

                PassageRepository -> PassagePers : save(passageDocument)
                activate PassagePers

                PassagePers - -> PassageRepository : Success
                deactivate PassagePers
            
            PassageRepository - -> PassageService : passage
            deactivate PassageRepository


            PassageService -> PassageMapper : toDTO(passage)
            activate PassageMapper

                PassageMapper -> PassageDTO : PassageDTO(passage)
                activate PassageDTO

                PassageDTO - -> PassageMapper : passageDTO
                deactivate PassageDTO
            
            PassageMapper - -> PassageService : passageDTO
            deactivate PassageMapper


            PassageService - -> Controller : passageDTO

    Controller - -> Routing : passageDTO
    deactivate Controller

[o<- -o Routing : floorDTO[]
deactivate Routing


@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 BST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>
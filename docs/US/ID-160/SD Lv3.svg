<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="913px" preserveAspectRatio="none" style="width:1430px;height:913px;background:#FFFFFF;" version="1.1" viewBox="0 0 1430 913" width="1430px" zoomAndPan="magnify"><defs/><g><rect fill="#ADD8E6" height="901.1953" style="stroke:#181818;stroke-width:0.5;" width="1266" x="158.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="138" x="722.5" y="19.4951">Campus Management</text><rect fill="#00FFFF" height="879.8438" style="stroke:#181818;stroke-width:0.5;" width="223" x="158.5" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="189" x="175.5" y="40.8467">Framework And Drivers Layer</text><rect fill="#77FFAA" height="879.8438" style="stroke:#181818;stroke-width:0.5;" width="230" x="489.5" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="156" x="526.5" y="40.8467">Interface Adapters Layer</text><rect fill="#FF6666" height="879.8438" style="stroke:#181818;stroke-width:0.5;" width="194" x="1032.5" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="170" x="1044.5" y="40.8467">Application Business Rules</text><rect fill="#EEDDAA" height="879.8438" style="stroke:#181818;stroke-width:0.5;" width="186" x="1238.5" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="162" x="1250.5" y="40.8467">Enterprise Business Rules</text><rect fill="none" height="418.4063" style="stroke:#000000;stroke-width:1.5;" width="1160" x="219.5" y="365.4766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="14" x2="14" y1="80.3125" y2="868.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="194" x2="194" y1="80.3125" y2="868.5859"/><rect fill="#FFFFFF" height="739.9219" style="stroke:#181818;stroke-width:1.0;" width="10" x="189" y="110.6641"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="306.5" x2="306.5" y1="80.3125" y2="868.5859"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="301.5" y="292.7734"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="301.5" y="507.2344"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="440.5" x2="440.5" y1="80.3125" y2="868.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="531.5" x2="531.5" y1="80.3125" y2="868.5859"/><rect fill="#FFFFFF" height="679.2188" style="stroke:#181818;stroke-width:1.0;" width="10" x="526.5" y="141.0156"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="647.5" x2="647.5" y1="80.3125" y2="868.5859"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="642.5" y="262.4219"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="642.5" y="476.8828"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="784.5" x2="784.5" y1="80.3125" y2="868.5859"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="779.5" y="171.3672"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="779.5" y="628.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="958.5" x2="958.5" y1="80.3125" y2="868.5859"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="953.5" y="598.2891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1129.5" x2="1129.5" y1="80.3125" y2="868.5859"/><rect fill="#FFFFFF" height="487.625" style="stroke:#181818;stroke-width:1.0;" width="10" x="1124.5" y="232.0703"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1331.5" x2="1331.5" y1="80.3125" y2="868.5859"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1326.5" y="416.1797"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="18" x="5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="12" y="69.2363"> </text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="63" x="162.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="169.5" y="69.2363">Routing</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="142" x="235.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128" x="242.5" y="69.2363">Building Persistence</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="397.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="404.5" y="69.2363">Data Model</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="493.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="500.5" y="69.2363">Controller</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="579.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="586.5" y="69.2363">Building Repository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="735.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="742.5" y="69.2363">Building DTO</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="900.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="907.5" y="69.2363">Building Mapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115" x="1072" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="1079" y="69.2363">Building Service</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64" x="1299.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="1306.5" y="69.2363">Building</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="18" x="5" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="12" y="890.1191"> </text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="63" x="162.5" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="169.5" y="890.1191">Routing</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="142" x="235.5" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128" x="242.5" y="890.1191">Building Persistence</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="397.5" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="404.5" y="890.1191">Data Model</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="493.5" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="500.5" y="890.1191">Controller</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="579.5" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="586.5" y="890.1191">Building Repository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="735.5" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="742.5" y="890.1191">Building DTO</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="900.5" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="907.5" y="890.1191">Building Mapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115" x="1072" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="1079" y="890.1191">Building Service</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64" x="1299.5" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="1306.5" y="890.1191">Building</text><ellipse cx="10.5" cy="109.9141" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="177,106.6641,187,110.6641,177,114.6641,181,110.6641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="15" x2="183" y1="110.6641" y2="110.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="18" y="105.8076">PUT /building/{id}</text><polygon fill="#181818" points="514.5,137.0156,524.5,141.0156,514.5,145.0156,518.5,141.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="199" x2="520.5" y1="141.0156" y2="141.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="206" y="136.1592">updateBuilding(input)</text><polygon fill="#181818" points="767.5,167.3672,777.5,171.3672,767.5,175.3672,771.5,171.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="536.5" x2="773.5" y1="171.3672" y2="171.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="543.5" y="166.5107">input as BuildingDTO</text><polygon fill="#181818" points="547.5,197.7188,537.5,201.7188,547.5,205.7188,543.5,201.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="541.5" x2="778.5" y1="201.7188" y2="201.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="553.5" y="196.8623">buildingDTO</text><polygon fill="#181818" points="1112.5,228.0703,1122.5,232.0703,1112.5,236.0703,1116.5,232.0703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="536.5" x2="1118.5" y1="232.0703" y2="232.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163" x="543.5" y="227.2139">updateBuilding(buildingDTO)</text><polygon fill="#181818" points="663.5,258.4219,653.5,262.4219,663.5,266.4219,659.5,262.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="657.5" x2="1123.5" y1="262.4219" y2="262.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="669.5" y="257.5654">findById(buildingDTO.id)</text><polygon fill="#181818" points="322.5,288.7734,312.5,292.7734,322.5,296.7734,318.5,292.7734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="316.5" x2="641.5" y1="292.7734" y2="292.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="328.5" y="287.917">findById(buildingDTO.id)</text><polygon fill="#181818" points="630.5,319.125,640.5,323.125,630.5,327.125,634.5,323.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="311.5" x2="636.5" y1="323.125" y2="323.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="318.5" y="318.2686">building</text><polygon fill="#181818" points="1112.5,349.4766,1122.5,353.4766,1112.5,357.4766,1116.5,353.4766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="652.5" x2="1118.5" y1="353.4766" y2="353.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="659.5" y="348.6201">building</text><path d="M219.5,365.4766 L280.5,365.4766 L280.5,373.8281 L270.5,383.8281 L219.5,383.8281 L219.5,365.4766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="418.4063" style="stroke:#000000;stroke-width:1.5;" width="1160" x="219.5" y="365.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="234.5" y="379.9717">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="110" x="295.5" y="378.8955">[if building is found]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="219.5" x2="1379.5" y1="738.6953" y2="738.6953"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="118" x="224.5" y="750.1143">[if building not found]</text><polygon fill="#181818" points="1314.5,412.1797,1324.5,416.1797,1314.5,420.1797,1318.5,416.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1134.5" x2="1320.5" y1="416.1797" y2="416.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="1141.5" y="411.3232">setProperties(buildingDTO)</text><polygon fill="#181818" points="1145.5,442.5313,1135.5,446.5313,1145.5,450.5313,1141.5,446.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1139.5" x2="1325.5" y1="446.5313" y2="446.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="1151.5" y="441.6748">updatedBuilding</text><polygon fill="#181818" points="663.5,472.8828,653.5,476.8828,663.5,480.8828,659.5,476.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="657.5" x2="1123.5" y1="476.8828" y2="476.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="669.5" y="472.0264">save(updatedBuilding)</text><polygon fill="#181818" points="322.5,503.2344,312.5,507.2344,322.5,511.2344,318.5,507.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="316.5" x2="641.5" y1="507.2344" y2="507.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="328.5" y="502.3779">save(updatedBuilding)</text><polygon fill="#181818" points="630.5,533.5859,640.5,537.5859,630.5,541.5859,634.5,537.5859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="311.5" x2="636.5" y1="537.5859" y2="537.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="318.5" y="532.7295">Success</text><polygon fill="#181818" points="1112.5,563.9375,1122.5,567.9375,1112.5,571.9375,1116.5,567.9375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="652.5" x2="1118.5" y1="567.9375" y2="567.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="659.5" y="563.0811">Success</text><polygon fill="#181818" points="974.5,594.2891,964.5,598.2891,974.5,602.2891,970.5,598.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="968.5" x2="1123.5" y1="598.2891" y2="598.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="980.5" y="593.4326">toDTO(updatedBuilding)</text><polygon fill="#181818" points="800.5,624.6406,790.5,628.6406,800.5,632.6406,796.5,628.6406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="794.5" x2="952.5" y1="628.6406" y2="628.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="806.5" y="623.7842">updatedBuilding as DTO</text><polygon fill="#181818" points="941.5,654.9922,951.5,658.9922,941.5,662.9922,945.5,658.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="789.5" x2="947.5" y1="658.9922" y2="658.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="796.5" y="654.1357">buildingDTO</text><polygon fill="#181818" points="1112.5,685.3438,1122.5,689.3438,1112.5,693.3438,1116.5,689.3438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="963.5" x2="1118.5" y1="689.3438" y2="689.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="970.5" y="684.4873">buildingDTO</text><polygon fill="#181818" points="547.5,715.6953,537.5,719.6953,547.5,723.6953,543.5,719.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="541.5" x2="1123.5" y1="719.6953" y2="719.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="553.5" y="714.8389">buildingDTO</text><polygon fill="#181818" points="547.5,771.8828,537.5,775.8828,547.5,779.8828,543.5,775.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="541.5" x2="1128.5" y1="775.8828" y2="775.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="553.5" y="771.0264">Failure(Building not found)</text><polygon fill="#181818" points="210,816.2344,200,820.2344,210,824.2344,206,820.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="204" x2="525.5" y1="820.2344" y2="820.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="216" y="815.3779">buildingDTO / error message</text><ellipse cx="10.5" cy="849.8359" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="27.5,846.5859,17.5,850.5859,27.5,854.5859,23.5,850.5859" style="stroke:#181818;stroke-width:1.0;"/><ellipse cx="188.5" cy="849.8359" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="25.5" x2="184" y1="850.5859" y2="850.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="28" y="845.7295">buildingDTO / error message</text><!--MD5=[3adb5930a319ea5c3c8716538ed8f660]
@startuml SD Lv3

!pragma teoz true

participant " "
box "Campus Management" #LightBlue

    box "Framework And Drivers Layer" #00ffff
        participant Routing
        participant "Building Persistence" as Persistence
    end box

    participant "Data Model" as Data
    box "Interface Adapters Layer" #77ffaa
        participant Controller
        participant "Building Repository" as Repository
    end box

    participant "Building DTO" as BuildingDTO
    participant "Building Mapper" as BuildingMapper
    box "Application Business Rules" #ff6666
        participant "Building Service" as BuildingService
    end box

    box "Enterprise Business Rules" #eeddaa
        participant Building
    end box
end box

[o-> Routing : PUT /building/{id}
activate Routing

    Routing -> Controller : updateBuilding(input)
    activate Controller

        Controller -> BuildingDTO : input as BuildingDTO
        activate BuildingDTO

        BuildingDTO - -> Controller : buildingDTO
        deactivate BuildingDTO

        Controller -> BuildingService : updateBuilding(buildingDTO)
        activate BuildingService
        
            BuildingService -> Repository : findById(buildingDTO.id)
            activate Repository

                Repository -> Persistence : findById(buildingDTO.id)
                activate Persistence

                Persistence - -> Repository : building
                deactivate Persistence

            Repository - -> BuildingService : building
            deactivate Repository

            alt if building is found

                BuildingService -> Building : setProperties(buildingDTO)
                activate Building

                Building - -> BuildingService : updatedBuilding
                deactivate Building

                BuildingService -> Repository : save(updatedBuilding)
                activate Repository

                    Repository -> Persistence : save(updatedBuilding)
                    activate Persistence

                    Persistence - -> Repository : Success
                    deactivate Persistence

                Repository - -> BuildingService : Success
                deactivate Repository

                BuildingService -> BuildingMapper : toDTO(updatedBuilding)
                activate BuildingMapper
                
                    BuildingMapper -> BuildingDTO : updatedBuilding as DTO
                    activate BuildingDTO

                    BuildingDTO - -> BuildingMapper : buildingDTO
                    deactivate BuildingDTO

                BuildingMapper - -> BuildingService : buildingDTO
                deactivate BuildingMapper

                BuildingService - -> Controller : buildingDTO
                deactivate BuildingService

            else if building not found
                BuildingService - -> Controller : Failure(Building not found)
            end

    Controller - -> Routing : buildingDTO / error message
    deactivate Controller

[o<- -o Routing : buildingDTO / error message
deactivate Routing

@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 BST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Client VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>
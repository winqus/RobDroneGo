<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1595px" preserveAspectRatio="none" style="width:1662px;height:1595px;background:#FFFFFF;" version="1.1" viewBox="0 0 1662 1595" width="1662px" zoomAndPan="magnify"><defs/><g><rect fill="#ADD8E6" height="1583.1953" style="stroke:#181818;stroke-width:0.5;" width="1425" x="231" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="138" x="874.5" y="19.4951">Campus Management</text><rect fill="#00FFFF" height="1561.8438" style="stroke:#181818;stroke-width:0.5;" width="223" x="231" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="189" x="248" y="40.8467">Framework And Drivers Layer</text><rect fill="#77FFAA" height="1561.8438" style="stroke:#181818;stroke-width:0.5;" width="346" x="562" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="156" x="657" y="40.8467">Interface Adapters Layer</text><rect fill="#FF6666" height="1561.8438" style="stroke:#181818;stroke-width:0.5;" width="194" x="1135" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="170" x="1147" y="40.8467">Application Business Rules</text><rect fill="#EEDDAA" height="1561.8438" style="stroke:#181818;stroke-width:0.5;" width="186" x="1470" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="162" x="1482" y="40.8467">Enterprise Business Rules</text><rect fill="none" height="1161.1094" style="stroke:#000000;stroke-width:1.5;" width="1646.5" x="8" y="365.4766"/><rect fill="none" height="876.4609" style="stroke:#000000;stroke-width:1.5;" width="1602.5" x="27" y="519.2344"/><rect fill="none" height="539.8125" style="stroke:#000000;stroke-width:1.5;" width="1558.5" x="46" y="724.9922"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="273" x2="273" y1="80.3125" y2="1550.5859"/><rect fill="#FFFFFF" height="1434.9219" style="stroke:#181818;stroke-width:1.0;" width="10" x="268" y="110.6641"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="379" x2="379" y1="80.3125" y2="1550.5859"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="374" y="292.7734"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="374" y="446.5313"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="374" y="866.75"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="513" x2="513" y1="80.3125" y2="1550.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="604" x2="604" y1="80.3125" y2="1550.5859"/><rect fill="#FFFFFF" height="968.5469" style="stroke:#181818;stroke-width:1.0;" width="10" x="599" y="141.0156"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="713.5" x2="713.5" y1="80.3125" y2="1550.5859"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="708.5" y="262.4219"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="708.5" y="836.3984"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="844.5" x2="844.5" y1="80.3125" y2="1550.5859"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="839.5" y="416.1797"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="966.5" x2="966.5" y1="80.3125" y2="1550.5859"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="961.5" y="171.3672"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="961.5" y="988.1563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1077.5" x2="1077.5" y1="80.3125" y2="1550.5859"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="1072.5" y="957.8047"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1232" x2="1232" y1="80.3125" y2="1550.5859"/><rect fill="#FFFFFF" height="847.1406" style="stroke:#181818;stroke-width:1.0;" width="10" x="1227" y="232.0703"/><rect fill="#FFBBBB" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1232" y="582.9375"/><rect fill="#FFBBBB" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1232" y="669.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1563" x2="1563" y1="80.3125" y2="1550.5859"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1558" y="775.6953"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="63" x="241.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="248.5" y="69.2363">Routing</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="129" x="314.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="321.5" y="69.2363">Room Persistence</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="470" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="477" y="69.2363">Data Model</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="566" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="573" y="69.2363">Controller</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="123" x="652" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="659" y="69.2363">Room Repository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="785" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="792" y="69.2363">Floor Repository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="85" x="924" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="931" y="69.2363">Room DTO</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="1026" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="1033" y="69.2363">Room Mapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102" x="1181" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="1188" y="69.2363">Room Service</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="51" x="1537.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="1544.5" y="69.2363">Room</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="63" x="241.5" y="1550.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="248.5" y="1572.1191">Routing</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="129" x="314.5" y="1550.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="321.5" y="1572.1191">Room Persistence</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="470" y="1550.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="477" y="1572.1191">Data Model</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="566" y="1550.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="573" y="1572.1191">Controller</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="123" x="652" y="1550.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="659" y="1572.1191">Room Repository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="785" y="1550.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="792" y="1572.1191">Floor Repository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="85" x="924" y="1550.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="931" y="1572.1191">Room DTO</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="1026" y="1550.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="1033" y="1572.1191">Room Mapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102" x="1181" y="1550.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="1188" y="1572.1191">Room Service</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="51" x="1537.5" y="1550.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="1544.5" y="1572.1191">Room</text><ellipse cx="10.5" cy="109.9141" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="256,106.6641,266,110.6641,256,114.6641,260,110.6641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="15" x2="262" y1="110.6641" y2="110.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="18" y="105.8076">POST /room</text><polygon fill="#181818" points="587,137.0156,597,141.0156,587,145.0156,591,141.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="278" x2="593" y1="141.0156" y2="141.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="285" y="136.1592">createRoom(input)</text><polygon fill="#181818" points="949.5,167.3672,959.5,171.3672,949.5,175.3672,953.5,171.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="609" x2="955.5" y1="171.3672" y2="171.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="616" y="166.5107">input as RoomDTO</text><polygon fill="#181818" points="620,197.7188,610,201.7188,620,205.7188,616,201.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="614" x2="960.5" y1="201.7188" y2="201.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="626" y="196.8623">roomDTO</text><polygon fill="#181818" points="1215,228.0703,1225,232.0703,1215,236.0703,1219,232.0703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="609" x2="1221" y1="232.0703" y2="232.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="616" y="227.2139">createRoom(roomDTO)</text><polygon fill="#181818" points="729.5,258.4219,719.5,262.4219,729.5,266.4219,725.5,262.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="723.5" x2="1226" y1="262.4219" y2="262.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="735.5" y="257.5654">exists(roomDTO)</text><polygon fill="#181818" points="395,288.7734,385,292.7734,395,296.7734,391,292.7734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="389" x2="707.5" y1="292.7734" y2="292.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="401" y="287.917">exists(roomDTO)</text><polygon fill="#181818" points="696.5,319.125,706.5,323.125,696.5,327.125,700.5,323.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="384" x2="702.5" y1="323.125" y2="323.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="391" y="318.2686">roomExists</text><polygon fill="#181818" points="1215,349.4766,1225,353.4766,1215,357.4766,1219,353.4766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="718.5" x2="1221" y1="353.4766" y2="353.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="725.5" y="348.6201">roomExists</text><path d="M8,365.4766 L69,365.4766 L69,373.8281 L59,383.8281 L8,383.8281 L8,365.4766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1161.1094" style="stroke:#000000;stroke-width:1.5;" width="1646.5" x="8" y="365.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="23" y="379.9717">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="130" x="84" y="378.8955">[if room does not exist]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="8" x2="1654.5" y1="1420.6953" y2="1420.6953"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="75" x="13" y="1432.1143">[room exists]</text><polygon fill="#181818" points="860.5,412.1797,850.5,416.1797,860.5,420.1797,856.5,416.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="854.5" x2="1226" y1="416.1797" y2="416.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="866.5" y="411.3232">findById(roomDTO.floorId)</text><polygon fill="#181818" points="395,442.5313,385,446.5313,395,450.5313,391,446.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="389" x2="838.5" y1="446.5313" y2="446.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="401" y="441.6748">findById(roomDTO.floorId)</text><polygon fill="#181818" points="827.5,472.8828,837.5,476.8828,827.5,480.8828,831.5,476.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="384" x2="833.5" y1="476.8828" y2="476.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="391" y="472.0264">floorExists</text><polygon fill="#181818" points="1215,503.2344,1225,507.2344,1215,511.2344,1219,507.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="849.5" x2="1221" y1="507.2344" y2="507.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="856.5" y="502.3779">floorExists</text><path d="M27,519.2344 L88,519.2344 L88,527.5859 L78,537.5859 L27,537.5859 L27,519.2344 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="876.4609" style="stroke:#000000;stroke-width:1.5;" width="1602.5" x="27" y="519.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="42" y="533.7295">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="81" x="103" y="532.6533">[if floor exists]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="27" x2="1629.5" y1="1289.8047" y2="1289.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="116" x="32" y="1301.2236">[floor does not exist]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1237" x2="1284" y1="569.9375" y2="569.9375"/><line style="stroke:#181818;stroke-width:1.0;" x1="1284" x2="1284" y1="569.9375" y2="582.9375"/><line style="stroke:#181818;stroke-width:1.0;" x1="1243" x2="1284" y1="582.9375" y2="582.9375"/><polygon fill="#181818" points="1253,578.9375,1243,582.9375,1253,586.9375,1249,582.9375" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="307" x="1249" y="565.0811">validateFitInFloor(roomDTO, floorExists.buildingCode)</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1242" x2="1284" y1="613.2891" y2="613.2891"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1284" x2="1284" y1="613.2891" y2="626.2891"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1237" x2="1284" y1="626.2891" y2="626.2891"/><polygon fill="#181818" points="1247,622.2891,1237,626.2891,1247,630.2891,1243,626.2891" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="1249" y="608.4326">fitsInFloor</text><line style="stroke:#181818;stroke-width:1.0;" x1="1237" x2="1284" y1="656.6406" y2="656.6406"/><line style="stroke:#181818;stroke-width:1.0;" x1="1284" x2="1284" y1="656.6406" y2="669.6406"/><line style="stroke:#181818;stroke-width:1.0;" x1="1243" x2="1284" y1="669.6406" y2="669.6406"/><polygon fill="#181818" points="1253,665.6406,1243,669.6406,1253,673.6406,1249,669.6406" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="1249" y="651.7842">validateNoRoomOverlap(roomDTO)</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1242" x2="1284" y1="699.9922" y2="699.9922"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1284" x2="1284" y1="699.9922" y2="712.9922"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1237" x2="1284" y1="712.9922" y2="712.9922"/><polygon fill="#181818" points="1247,708.9922,1237,712.9922,1247,716.9922,1243,712.9922" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="1249" y="695.1357">noRoomOverlap</text><path d="M46,724.9922 L107,724.9922 L107,733.3438 L97,743.3438 L46,743.3438 L46,724.9922 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="539.8125" style="stroke:#000000;stroke-width:1.5;" width="1558.5" x="46" y="724.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="61" y="739.4873">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="188" x="122" y="738.4111">[if fitsInFloor and noRoomOverlap]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="46" x2="1604.5" y1="1158.9141" y2="1158.9141"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="86" x="51" y="1170.333">[validation fails]</text><polygon fill="#181818" points="1546,771.6953,1556,775.6953,1546,779.6953,1550,775.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1237" x2="1552" y1="775.6953" y2="775.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="1244" y="770.8389">create(roomDTO)</text><polygon fill="#181818" points="1248,802.0469,1238,806.0469,1248,810.0469,1244,806.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1242" x2="1557" y1="806.0469" y2="806.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29" x="1254" y="801.1904">room</text><polygon fill="#181818" points="729.5,832.3984,719.5,836.3984,729.5,840.3984,725.5,836.3984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="723.5" x2="1226" y1="836.3984" y2="836.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="735.5" y="831.542">save(room)</text><polygon fill="#181818" points="395,862.75,385,866.75,395,870.75,391,866.75" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="389" x2="707.5" y1="866.75" y2="866.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="401" y="861.8936">save(room)</text><polygon fill="#181818" points="696.5,893.1016,706.5,897.1016,696.5,901.1016,700.5,897.1016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="384" x2="702.5" y1="897.1016" y2="897.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="391" y="892.2451">Success</text><polygon fill="#181818" points="1215,923.4531,1225,927.4531,1215,931.4531,1219,927.4531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="718.5" x2="1221" y1="927.4531" y2="927.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="725.5" y="922.5967">Success</text><polygon fill="#181818" points="1093.5,953.8047,1083.5,957.8047,1093.5,961.8047,1089.5,957.8047" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1087.5" x2="1226" y1="957.8047" y2="957.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="1099.5" y="952.9482">toDTO(room)</text><polygon fill="#181818" points="982.5,984.1563,972.5,988.1563,982.5,992.1563,978.5,988.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="976.5" x2="1071.5" y1="988.1563" y2="988.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="988.5" y="983.2998">room as DTO</text><polygon fill="#181818" points="1060.5,1014.5078,1070.5,1018.5078,1060.5,1022.5078,1064.5,1018.5078" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="971.5" x2="1066.5" y1="1018.5078" y2="1018.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="978.5" y="1013.6514">roomDTO</text><polygon fill="#181818" points="1215,1044.8594,1225,1048.8594,1215,1052.8594,1219,1048.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1082.5" x2="1221" y1="1048.8594" y2="1048.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="1089.5" y="1044.0029">roomDTO</text><polygon fill="#181818" points="620,1075.2109,610,1079.2109,620,1083.2109,616,1079.2109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="614" x2="1226" y1="1079.2109" y2="1079.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="626" y="1074.3545">roomDTO</text><polygon fill="#181818" points="289,1105.5625,279,1109.5625,289,1113.5625,285,1109.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="283" x2="598" y1="1109.5625" y2="1109.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="295" y="1104.7061">roomDTO</text><ellipse cx="10.5" cy="1139.1641" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="27.5,1135.9141,17.5,1139.9141,27.5,1143.9141,23.5,1139.9141" style="stroke:#181818;stroke-width:1.0;"/><ellipse cx="267.5" cy="1139.1641" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="25.5" x2="263" y1="1139.9141" y2="1139.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="28" y="1135.0576">roomDTO</text><polygon fill="#181818" points="615,1192.1016,605,1196.1016,615,1200.1016,611,1196.1016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="609" x2="1231" y1="1196.1016" y2="1196.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="621" y="1191.2451">Failure(validation error message)</text><polygon fill="#181818" points="289,1222.4531,279,1226.4531,289,1230.4531,285,1226.4531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="283" x2="603" y1="1226.4531" y2="1226.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="295" y="1221.5967">Failure(validation error message)</text><ellipse cx="10.5" cy="1256.0547" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="27.5,1252.8047,17.5,1256.8047,27.5,1260.8047,23.5,1256.8047" style="stroke:#181818;stroke-width:1.0;"/><ellipse cx="267.5" cy="1256.0547" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="25.5" x2="263" y1="1256.8047" y2="1256.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="28" y="1251.9482">Failure(validation error message)</text><polygon fill="#181818" points="615,1322.9922,605,1326.9922,615,1330.9922,611,1326.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="609" x2="1231" y1="1326.9922" y2="1326.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="621" y="1322.1357">Failure(Floor does not exist)</text><polygon fill="#181818" points="289,1353.3438,279,1357.3438,289,1361.3438,285,1357.3438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="283" x2="603" y1="1357.3438" y2="1357.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="295" y="1352.4873">Failure(Floor does not exist)</text><ellipse cx="10.5" cy="1386.9453" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="27.5,1383.6953,17.5,1387.6953,27.5,1391.6953,23.5,1387.6953" style="stroke:#181818;stroke-width:1.0;"/><ellipse cx="267.5" cy="1386.9453" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="25.5" x2="263" y1="1387.6953" y2="1387.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="28" y="1382.8389">Failure(Floor does not exist)</text><polygon fill="#181818" points="615,1453.8828,605,1457.8828,615,1461.8828,611,1457.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="609" x2="1231" y1="1457.8828" y2="1457.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="621" y="1453.0264">Failure(Room already exists)</text><polygon fill="#181818" points="289,1484.2344,279,1488.2344,289,1492.2344,285,1488.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="283" x2="603" y1="1488.2344" y2="1488.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="295" y="1483.3779">Failure(Room already exists)</text><ellipse cx="10.5" cy="1517.8359" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="27.5,1514.5859,17.5,1518.5859,27.5,1522.5859,23.5,1518.5859" style="stroke:#181818;stroke-width:1.0;"/><ellipse cx="267.5" cy="1517.8359" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="25.5" x2="263" y1="1518.5859" y2="1518.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="28" y="1513.7295">Failure(Room already exists)</text><!--MD5=[c8a7a8bcbdc4f74f5ccd3ad98a42978e]
@startuml SD Lv3

!pragma teoz true

box "Campus Management" #LightBlue

    box "Framework And Drivers Layer" #00ffff
        participant Routing
        participant "Room Persistence" as Persistence
    end box

    participant "Data Model" as Data
    box "Interface Adapters Layer" #77ffaa
        participant Controller
        participant "Room Repository" as RoomRepository
        participant "Floor Repository" as FloorRepository
    end box

    participant "Room DTO" as RoomDTO
    participant "Room Mapper" as RoomMapper
    box "Application Business Rules" #ff6666
        participant "Room Service" as RoomService
    end box

    box "Enterprise Business Rules" #eeddaa
        participant Room
    end box
end box

[o-> Routing : POST /room
activate Routing

    Routing -> Controller : createRoom(input)
    activate Controller

        Controller -> RoomDTO : input as RoomDTO
        activate RoomDTO

        RoomDTO - -> Controller : roomDTO
        deactivate RoomDTO

        Controller -> RoomService : createRoom(roomDTO)
        activate RoomService

            RoomService -> RoomRepository : exists(roomDTO)
            activate RoomRepository

                RoomRepository -> Persistence : exists(roomDTO)
                activate Persistence

                Persistence - -> RoomRepository : roomExists
                deactivate Persistence

            RoomRepository - -> RoomService : roomExists
            deactivate RoomRepository

            alt if room does not exist

                RoomService -> FloorRepository : findById(roomDTO.floorId)
                activate FloorRepository

                    FloorRepository -> Persistence : findById(roomDTO.floorId)
                    activate Persistence

                    Persistence - -> FloorRepository : floorExists
                    deactivate Persistence

                FloorRepository - -> RoomService : floorExists
                deactivate FloorRepository

                alt if floor exists

                    RoomService -> RoomService : validateFitInFloor(roomDTO, floorExists.buildingCode)
                    activate RoomService #FFBBBB

                    RoomService - -> RoomService : fitsInFloor
                    deactivate RoomService #FFBBBB

                    RoomService -> RoomService : validateNoRoomOverlap(roomDTO)
                    activate RoomService #FFBBBB

                    RoomService - -> RoomService : noRoomOverlap
                    deactivate RoomService #FFBBBB

                    alt if fitsInFloor and noRoomOverlap
                    
                        RoomService -> Room : create(roomDTO)
                        activate Room

                        Room - -> RoomService : room
                        deactivate Room

                        RoomService -> RoomRepository : save(room)
                        activate RoomRepository

                            RoomRepository -> Persistence : save(room)
                            activate Persistence

                            Persistence - -> RoomRepository : Success
                            deactivate Persistence

                        RoomRepository - -> RoomService : Success
                        deactivate RoomRepository

                        RoomService -> RoomMapper : toDTO(room)
                        activate RoomMapper

                            RoomMapper -> RoomDTO : room as DTO
                            activate RoomDTO

                            RoomDTO - -> RoomMapper : roomDTO
                            deactivate RoomDTO

                        RoomMapper - -> RoomService : roomDTO
                        deactivate RoomMapper

                        RoomService - -> Controller : roomDTO
                        deactivate RoomService

                        Controller - -> Routing : roomDTO
                        deactivate Controller

                        [o<- -o Routing : roomDTO

                    else validation fails
                        RoomService - -> Controller : Failure(validation error message)
                        deactivate RoomService

                        Controller - -> Routing : Failure(validation error message)
                        deactivate Controller

                        [o<- -o Routing : Failure(validation error message)
                    end

                else floor does not exist
                    RoomService - -> Controller : Failure(Floor does not exist)
                    deactivate RoomService

                    Controller - -> Routing : Failure(Floor does not exist)
                    deactivate Controller

                    [o<- -o Routing : Failure(Floor does not exist)
                end

            else room exists
                RoomService - -> Controller : Failure(Room already exists)
                deactivate RoomService

                Controller - -> Routing : Failure(Room already exists)
                deactivate Controller

                [o<- -o Routing : Failure(Room already exists)
            end
            
        deactivate RoomService

    deactivate Controller

deactivate Routing

@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 BST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Client VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>
<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="913px" preserveAspectRatio="none" style="width:1277px;height:913px;background:#FFFFFF;" version="1.1" viewBox="0 0 1277 913" width="1277px" zoomAndPan="magnify"><defs/><g><rect fill="#ADD8E6" height="901.1953" style="stroke:#181818;stroke-width:0.5;" width="1208" x="63.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="138" x="598.5" y="19.4951">Campus Management</text><rect fill="#00FFFF" height="879.8438" style="stroke:#181818;stroke-width:0.5;" width="223" x="63.5" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="189" x="80.5" y="40.8467">Framework And Drivers Layer</text><rect fill="#77FFAA" height="879.8438" style="stroke:#181818;stroke-width:0.5;" width="230" x="394.5" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="156" x="431.5" y="40.8467">Interface Adapters Layer</text><rect fill="#FF6666" height="879.8438" style="stroke:#181818;stroke-width:0.5;" width="194" x="879.5" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="170" x="891.5" y="40.8467">Application Business Rules</text><rect fill="#EEDDAA" height="879.8438" style="stroke:#181818;stroke-width:0.5;" width="186" x="1085.5" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="162" x="1097.5" y="40.8467">Enterprise Business Rules</text><rect fill="none" height="266.6484" style="stroke:#000000;stroke-width:1.5;" width="1102" x="124.5" y="365.4766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="14" x2="14" y1="80.3125" y2="868.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="99" x2="99" y1="80.3125" y2="868.5859"/><rect fill="#FFFFFF" height="739.9219" style="stroke:#181818;stroke-width:1.0;" width="10" x="94" y="110.6641"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="211.5" x2="211.5" y1="80.3125" y2="868.5859"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="206.5" y="292.7734"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="206.5" y="507.2344"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="345.5" x2="345.5" y1="80.3125" y2="868.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="436.5" x2="436.5" y1="80.3125" y2="868.5859"/><rect fill="#FFFFFF" height="679.2188" style="stroke:#181818;stroke-width:1.0;" width="10" x="431.5" y="141.0156"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="552.5" x2="552.5" y1="80.3125" y2="868.5859"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="547.5" y="262.4219"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="547.5" y="476.8828"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="689.5" x2="689.5" y1="80.3125" y2="868.5859"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="684.5" y="171.3672"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="684.5" y="698.8281"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="815.5" x2="815.5" y1="80.3125" y2="868.5859"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="810.5" y="668.4766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="976.5" x2="976.5" y1="80.3125" y2="868.5859"/><rect fill="#FFFFFF" height="557.8125" style="stroke:#181818;stroke-width:1.0;" width="10" x="971.5" y="232.0703"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1178.5" x2="1178.5" y1="80.3125" y2="868.5859"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1173.5" y="416.1797"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="18" x="5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="12" y="69.2363"> </text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="63" x="67.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="74.5" y="69.2363">Routing</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="142" x="140.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128" x="147.5" y="69.2363">Building Persistence</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="302.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="309.5" y="69.2363">Data Model</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="398.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="405.5" y="69.2363">Controller</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="484.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="491.5" y="69.2363">Building Repository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="640.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="647.5" y="69.2363">Building DTO</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="757.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="764.5" y="69.2363">Building Mapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115" x="919" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="926" y="69.2363">Building Service</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64" x="1146.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="1153.5" y="69.2363">Building</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="18" x="5" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="12" y="890.1191"> </text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="63" x="67.5" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="74.5" y="890.1191">Routing</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="142" x="140.5" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128" x="147.5" y="890.1191">Building Persistence</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="302.5" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="309.5" y="890.1191">Data Model</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="398.5" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="405.5" y="890.1191">Controller</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="484.5" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="491.5" y="890.1191">Building Repository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="640.5" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="647.5" y="890.1191">Building DTO</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="757.5" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="764.5" y="890.1191">Building Mapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115" x="919" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="926" y="890.1191">Building Service</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64" x="1146.5" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="1153.5" y="890.1191">Building</text><ellipse cx="10.5" cy="109.9141" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="82,106.6641,92,110.6641,82,114.6641,86,110.6641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="15" x2="88" y1="110.6641" y2="110.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27" x="18" y="105.8076">Post</text><polygon fill="#181818" points="419.5,137.0156,429.5,141.0156,419.5,145.0156,423.5,141.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="104" x2="425.5" y1="141.0156" y2="141.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="111" y="136.1592">createBuilding(input)</text><polygon fill="#181818" points="672.5,167.3672,682.5,171.3672,672.5,175.3672,676.5,171.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="441.5" x2="678.5" y1="171.3672" y2="171.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="448.5" y="166.5107">input as BuildingDTO</text><polygon fill="#181818" points="452.5,197.7188,442.5,201.7188,452.5,205.7188,448.5,201.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="446.5" x2="683.5" y1="201.7188" y2="201.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="458.5" y="196.8623">buildingDTO</text><polygon fill="#181818" points="959.5,228.0703,969.5,232.0703,959.5,236.0703,963.5,232.0703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="441.5" x2="965.5" y1="232.0703" y2="232.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="448.5" y="227.2139">createBuilding(buildingDTO)</text><polygon fill="#181818" points="568.5,258.4219,558.5,262.4219,568.5,266.4219,564.5,262.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="562.5" x2="970.5" y1="262.4219" y2="262.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="574.5" y="257.5654">findByCode(buildingDTO.code)</text><polygon fill="#181818" points="227.5,288.7734,217.5,292.7734,227.5,296.7734,223.5,292.7734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="221.5" x2="546.5" y1="292.7734" y2="292.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="233.5" y="287.917">findByCode(buildingDTO.code)</text><polygon fill="#181818" points="535.5,319.125,545.5,323.125,535.5,327.125,539.5,323.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="216.5" x2="541.5" y1="323.125" y2="323.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="223.5" y="318.2686">buildingExists</text><polygon fill="#181818" points="959.5,349.4766,969.5,353.4766,959.5,357.4766,963.5,353.4766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="557.5" x2="965.5" y1="353.4766" y2="353.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="564.5" y="348.6201">buildingExists</text><path d="M124.5,365.4766 L185.5,365.4766 L185.5,373.8281 L175.5,383.8281 L124.5,383.8281 L124.5,365.4766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="266.6484" style="stroke:#000000;stroke-width:1.5;" width="1102" x="124.5" y="365.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="139.5" y="379.9717">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="144" x="200.5" y="378.8955">[if building does not exist]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="124.5" x2="1226.5" y1="586.9375" y2="586.9375"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="89" x="129.5" y="598.3564">[building exists]</text><polygon fill="#181818" points="1161.5,412.1797,1171.5,416.1797,1161.5,420.1797,1165.5,416.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="981.5" x2="1167.5" y1="416.1797" y2="416.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="988.5" y="411.3232">create(buildingDTO)</text><polygon fill="#181818" points="992.5,442.5313,982.5,446.5313,992.5,450.5313,988.5,446.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="986.5" x2="1172.5" y1="446.5313" y2="446.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="998.5" y="441.6748">building</text><polygon fill="#181818" points="568.5,472.8828,558.5,476.8828,568.5,480.8828,564.5,476.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="562.5" x2="970.5" y1="476.8828" y2="476.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="574.5" y="472.0264">save(building)</text><polygon fill="#181818" points="227.5,503.2344,217.5,507.2344,227.5,511.2344,223.5,507.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="221.5" x2="546.5" y1="507.2344" y2="507.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="233.5" y="502.3779">save(building)</text><polygon fill="#181818" points="535.5,533.5859,545.5,537.5859,535.5,541.5859,539.5,537.5859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="216.5" x2="541.5" y1="537.5859" y2="537.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="223.5" y="532.7295">Success</text><polygon fill="#181818" points="959.5,563.9375,969.5,567.9375,959.5,571.9375,963.5,567.9375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="557.5" x2="965.5" y1="567.9375" y2="567.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="564.5" y="563.0811">Success</text><polygon fill="#181818" points="452.5,620.125,442.5,624.125,452.5,628.125,448.5,624.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="446.5" x2="970.5" y1="624.125" y2="624.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="458.5" y="619.2686">Failure(Building already exists)</text><polygon fill="#181818" points="831.5,664.4766,821.5,668.4766,831.5,672.4766,827.5,668.4766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="825.5" x2="970.5" y1="668.4766" y2="668.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="837.5" y="663.6201">toDTO(building)</text><polygon fill="#181818" points="705.5,694.8281,695.5,698.8281,705.5,702.8281,701.5,698.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="699.5" x2="809.5" y1="698.8281" y2="698.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="711.5" y="693.9717">building as DTO</text><polygon fill="#181818" points="798.5,725.1797,808.5,729.1797,798.5,733.1797,802.5,729.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="694.5" x2="804.5" y1="729.1797" y2="729.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="701.5" y="724.3232">buildingDTO</text><polygon fill="#181818" points="959.5,755.5313,969.5,759.5313,959.5,763.5313,963.5,759.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="820.5" x2="965.5" y1="759.5313" y2="759.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="827.5" y="754.6748">buildingDTO</text><polygon fill="#181818" points="452.5,785.8828,442.5,789.8828,452.5,793.8828,448.5,789.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="446.5" x2="970.5" y1="789.8828" y2="789.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="458.5" y="785.0264">buildingDTO</text><polygon fill="#181818" points="115,816.2344,105,820.2344,115,824.2344,111,820.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="109" x2="430.5" y1="820.2344" y2="820.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="121" y="815.3779">buildingDTO</text><ellipse cx="10.5" cy="849.8359" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="27.5,846.5859,17.5,850.5859,27.5,854.5859,23.5,850.5859" style="stroke:#181818;stroke-width:1.0;"/><ellipse cx="93.5" cy="849.8359" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="25.5" x2="89" y1="850.5859" y2="850.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="28" y="845.7295">buildingDTO</text><!--MD5=[5887aa59c49b053ca1f9d82a17540512]
@startuml SD Lv3

!pragma teoz true

participant " "
box "Campus Management" #LightBlue

    box "Framework And Drivers Layer" #00ffff
        participant Routing
        participant "Building Persistence" as Persistence
    end box

    participant "Data Model" as Data
    box "Interface Adapters Layer" #77ffaa
        participant Controller
        participant "Building Repository" as Repository
    end box

    participant "Building DTO" as BuildingDTO
    participant "Building Mapper" as BuildingMapper
    box "Application Business Rules" #ff6666
        participant "Building Service" as BuildingService
    end box

    box "Enterprise Business Rules" #eeddaa
        participant Building
    end box
end box

[o-> Routing : Post
activate Routing

    Routing -> Controller : createBuilding(input)
    activate Controller

        Controller -> BuildingDTO : input as BuildingDTO
        activate BuildingDTO

        BuildingDTO - -> Controller : buildingDTO
        deactivate BuildingDTO

        Controller -> BuildingService : createBuilding(buildingDTO)
        activate BuildingService
        
            BuildingService -> Repository : findByCode(buildingDTO.code)
            activate Repository

                Repository -> Persistence : findByCode(buildingDTO.code)
                activate Persistence

                Persistence - -> Repository : buildingExists
                deactivate Persistence

            Repository - -> BuildingService : buildingExists
            deactivate Repository

            alt if building does not exist

                BuildingService -> Building : create(buildingDTO)
                activate Building

                Building - -> BuildingService : building
                deactivate Building

                BuildingService -> Repository : save(building)
                activate Repository

                    Repository -> Persistence : save(building)
                    activate Persistence

                    Persistence - -> Repository : Success
                    deactivate Persistence

                Repository - -> BuildingService : Success
                deactivate Repository

            else building exists
                BuildingService - -> Controller : Failure(Building already exists)
            end

        BuildingService -> BuildingMapper : toDTO(building)
        activate BuildingMapper
        
            BuildingMapper -> BuildingDTO : building as DTO
            activate BuildingDTO

            BuildingDTO - -> BuildingMapper : buildingDTO
            deactivate BuildingDTO

        BuildingMapper - -> BuildingService : buildingDTO
        deactivate BuildingMapper

        BuildingService - -> Controller : buildingDTO
        deactivate BuildingService

    Controller - -> Routing : buildingDTO
    deactivate Controller

[o<- -o Routing : buildingDTO
deactivate Routing

@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 BST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Client VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>
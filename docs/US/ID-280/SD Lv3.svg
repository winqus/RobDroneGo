<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="913px" preserveAspectRatio="none" style="width:1677px;height:913px;background:#FFFFFF;" version="1.1" viewBox="0 0 1677 913" width="1677px" zoomAndPan="magnify"><defs/><g><rect fill="#ADD8E6" height="901.1953" style="stroke:#181818;stroke-width:0.5;" width="1390" x="281.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="138" x="907.5" y="19.4951">Campus Management</text><rect fill="#00FFFF" height="879.8438" style="stroke:#181818;stroke-width:0.5;" width="223" x="281.5" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="189" x="298.5" y="40.8467">Framework And Drivers Layer</text><rect fill="#77FFAA" height="879.8438" style="stroke:#181818;stroke-width:0.5;" width="230" x="612.5" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="156" x="649.5" y="40.8467">Interface Adapters Layer</text><rect fill="#FF6666" height="879.8438" style="stroke:#181818;stroke-width:0.5;" width="194" x="1279.5" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="170" x="1291.5" y="40.8467">Application Business Rules</text><rect fill="#EEDDAA" height="879.8438" style="stroke:#181818;stroke-width:0.5;" width="186" x="1485.5" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="162" x="1497.5" y="40.8467">Enterprise Business Rules</text><rect fill="none" height="418.4063" style="stroke:#000000;stroke-width:1.5;" width="1285" x="342.5" y="365.4766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="14" x2="14" y1="80.3125" y2="868.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="317" x2="317" y1="80.3125" y2="868.5859"/><rect fill="#FFFFFF" height="739.9219" style="stroke:#181818;stroke-width:1.0;" width="10" x="312" y="110.6641"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="429.5" x2="429.5" y1="80.3125" y2="868.5859"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="424.5" y="292.7734"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="424.5" y="507.2344"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="563.5" x2="563.5" y1="80.3125" y2="868.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="654.5" x2="654.5" y1="80.3125" y2="868.5859"/><rect fill="#FFFFFF" height="679.2188" style="stroke:#181818;stroke-width:1.0;" width="10" x="649.5" y="141.0156"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="770.5" x2="770.5" y1="80.3125" y2="868.5859"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="765.5" y="262.4219"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="765.5" y="476.8828"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="908.5" x2="908.5" y1="80.3125" y2="868.5859"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="903.5" y="171.3672"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="903.5" y="628.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1130.5" x2="1130.5" y1="80.3125" y2="868.5859"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="1125.5" y="598.2891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1376.5" x2="1376.5" y1="80.3125" y2="868.5859"/><rect fill="#FFFFFF" height="487.625" style="stroke:#181818;stroke-width:1.0;" width="10" x="1371.5" y="232.0703"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1578.5" x2="1578.5" y1="80.3125" y2="868.5859"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1573.5" y="416.1797"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="18" x="5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="12" y="69.2363"> </text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="63" x="285.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="292.5" y="69.2363">Routing</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="142" x="358.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128" x="365.5" y="69.2363">Building Persistence</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="520.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="527.5" y="69.2363">Data Model</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="616.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="623.5" y="69.2363">Controller</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="702.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="709.5" y="69.2363">Building Repository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="858.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="865.5" y="69.2363">Elevator DTO</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="1072.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="1079.5" y="69.2363">Building Mapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117" x="1318" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="1325" y="69.2363">Elevator Service</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="66" x="1545.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52" x="1552.5" y="69.2363">Elevator</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="18" x="5" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="12" y="890.1191"> </text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="63" x="285.5" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="292.5" y="890.1191">Routing</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="142" x="358.5" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128" x="365.5" y="890.1191">Building Persistence</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="520.5" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="527.5" y="890.1191">Data Model</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="616.5" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="623.5" y="890.1191">Controller</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="702.5" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="709.5" y="890.1191">Building Repository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="858.5" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="865.5" y="890.1191">Elevator DTO</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="1072.5" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="1079.5" y="890.1191">Building Mapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117" x="1318" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="1325" y="890.1191">Elevator Service</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="66" x="1545.5" y="868.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52" x="1552.5" y="890.1191">Elevator</text><ellipse cx="10.5" cy="109.9141" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="300,106.6641,310,110.6641,300,114.6641,304,110.6641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="15" x2="306" y1="110.6641" y2="110.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="18" y="105.8076">PUT /building/{code}/elevator</text><polygon fill="#181818" points="637.5,137.0156,647.5,141.0156,637.5,145.0156,641.5,141.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="322" x2="643.5" y1="141.0156" y2="141.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="329" y="136.1592">updateElevator(input, code)</text><polygon fill="#181818" points="891.5,167.3672,901.5,171.3672,891.5,175.3672,895.5,171.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="659.5" x2="897.5" y1="171.3672" y2="171.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="666.5" y="166.5107">input as ElevatorDTO</text><polygon fill="#181818" points="670.5,197.7188,660.5,201.7188,670.5,205.7188,666.5,201.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="664.5" x2="902.5" y1="201.7188" y2="201.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="676.5" y="196.8623">elevatorDTO</text><polygon fill="#181818" points="1359.5,228.0703,1369.5,232.0703,1359.5,236.0703,1363.5,232.0703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="659.5" x2="1365.5" y1="232.0703" y2="232.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="666.5" y="227.2139">updateElevator(elevatorDTO, code)</text><polygon fill="#181818" points="786.5,258.4219,776.5,262.4219,786.5,266.4219,782.5,262.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="780.5" x2="1370.5" y1="262.4219" y2="262.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="792.5" y="257.5654">findByCode(code)</text><polygon fill="#181818" points="445.5,288.7734,435.5,292.7734,445.5,296.7734,441.5,292.7734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="439.5" x2="764.5" y1="292.7734" y2="292.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="451.5" y="287.917">findByCode(code)</text><polygon fill="#181818" points="753.5,319.125,763.5,323.125,753.5,327.125,757.5,323.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="434.5" x2="759.5" y1="323.125" y2="323.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="441.5" y="318.2686">building</text><polygon fill="#181818" points="1359.5,349.4766,1369.5,353.4766,1359.5,357.4766,1363.5,353.4766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="775.5" x2="1365.5" y1="353.4766" y2="353.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="782.5" y="348.6201">building</text><path d="M342.5,365.4766 L403.5,365.4766 L403.5,373.8281 L393.5,383.8281 L342.5,383.8281 L342.5,365.4766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="418.4063" style="stroke:#000000;stroke-width:1.5;" width="1285" x="342.5" y="365.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="357.5" y="379.9717">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="189" x="418.5" y="378.8955">[if building and elevator are found]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="342.5" x2="1627.5" y1="738.6953" y2="738.6953"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="237" x="347.5" y="750.1143">[if building not found or elevator not found]</text><polygon fill="#181818" points="1561.5,412.1797,1571.5,416.1797,1561.5,420.1797,1565.5,416.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1381.5" x2="1567.5" y1="416.1797" y2="416.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="1388.5" y="411.3232">setProperties(elevatorDTO)</text><polygon fill="#181818" points="1392.5,442.5313,1382.5,446.5313,1392.5,450.5313,1388.5,446.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1386.5" x2="1572.5" y1="446.5313" y2="446.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="1398.5" y="441.6748">updatedElevator</text><polygon fill="#181818" points="786.5,472.8828,776.5,476.8828,786.5,480.8828,782.5,476.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="780.5" x2="1370.5" y1="476.8828" y2="476.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="792.5" y="472.0264">save(building with updatedElevator)</text><polygon fill="#181818" points="445.5,503.2344,435.5,507.2344,445.5,511.2344,441.5,507.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="439.5" x2="764.5" y1="507.2344" y2="507.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="451.5" y="502.3779">save(building with updatedElevator)</text><polygon fill="#181818" points="753.5,533.5859,763.5,537.5859,753.5,541.5859,757.5,537.5859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="434.5" x2="759.5" y1="537.5859" y2="537.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="441.5" y="532.7295">Success</text><polygon fill="#181818" points="1359.5,563.9375,1369.5,567.9375,1359.5,571.9375,1363.5,567.9375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="775.5" x2="1365.5" y1="567.9375" y2="567.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="782.5" y="563.0811">Success</text><polygon fill="#181818" points="1146.5,594.2891,1136.5,598.2891,1146.5,602.2891,1142.5,598.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1140.5" x2="1370.5" y1="598.2891" y2="598.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="1152.5" y="593.4326">toDTO(building with updatedElevator)</text><polygon fill="#181818" points="924.5,624.6406,914.5,628.6406,924.5,632.6406,920.5,628.6406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="918.5" x2="1124.5" y1="628.6406" y2="628.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="930.5" y="623.7842">updatedElevator as DTO</text><polygon fill="#181818" points="1113.5,654.9922,1123.5,658.9922,1113.5,662.9922,1117.5,658.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="913.5" x2="1119.5" y1="658.9922" y2="658.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="920.5" y="654.1357">buildingDTO with updatedElevator</text><polygon fill="#181818" points="1359.5,685.3438,1369.5,689.3438,1359.5,693.3438,1363.5,689.3438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1135.5" x2="1365.5" y1="689.3438" y2="689.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="1142.5" y="684.4873">buildingDTO with updatedElevator</text><polygon fill="#181818" points="670.5,715.6953,660.5,719.6953,670.5,723.6953,666.5,719.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="664.5" x2="1370.5" y1="719.6953" y2="719.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="676.5" y="714.8389">buildingDTO with updatedElevator</text><polygon fill="#181818" points="670.5,771.8828,660.5,775.8828,670.5,779.8828,666.5,775.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="664.5" x2="1375.5" y1="775.8828" y2="775.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215" x="676.5" y="771.0264">Failure(Building or Elevator not found)</text><polygon fill="#181818" points="333,816.2344,323,820.2344,333,824.2344,329,820.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="327" x2="648.5" y1="820.2344" y2="820.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="288" x="339" y="815.3779">buildingDTO with updatedElevator / error message</text><ellipse cx="10.5" cy="849.8359" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="27.5,846.5859,17.5,850.5859,27.5,854.5859,23.5,850.5859" style="stroke:#181818;stroke-width:1.0;"/><ellipse cx="311.5" cy="849.8359" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="25.5" x2="307" y1="850.5859" y2="850.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="288" x="28" y="845.7295">buildingDTO with updatedElevator / error message</text><!--MD5=[d949a9010a7b688401053f954d0a5055]
@startuml SD Lv3

!pragma teoz true

participant " "
box "Campus Management" #LightBlue

    box "Framework And Drivers Layer" #00ffff
        participant Routing
        participant "Building Persistence" as Persistence
    end box

    participant "Data Model" as Data
    box "Interface Adapters Layer" #77ffaa
        participant Controller
        participant "Building Repository" as Repository
    end box

    participant "Elevator DTO" as ElevatorDTO
    participant "Building Mapper" as BuildingMapper
    box "Application Business Rules" #ff6666
        participant "Elevator Service" as ElevatorService
    end box

    box "Enterprise Business Rules" #eeddaa
        participant Elevator
    end box
end box

[o-> Routing : PUT /building/{code}/elevator
activate Routing

    Routing -> Controller : updateElevator(input, code)
    activate Controller

        Controller -> ElevatorDTO : input as ElevatorDTO
        activate ElevatorDTO

        ElevatorDTO - -> Controller : elevatorDTO
        deactivate ElevatorDTO

        Controller -> ElevatorService : updateElevator(elevatorDTO, code)
        activate ElevatorService
        
            ElevatorService -> Repository : findByCode(code)
            activate Repository

                Repository -> Persistence : findByCode(code)
                activate Persistence

                Persistence - -> Repository : building
                deactivate Persistence

            Repository - -> ElevatorService : building
            deactivate Repository

            alt if building and elevator are found

                ElevatorService -> Elevator : setProperties(elevatorDTO)
                activate Elevator

                Elevator - -> ElevatorService : updatedElevator
                deactivate Elevator

                ElevatorService -> Repository : save(building with updatedElevator)
                activate Repository

                    Repository -> Persistence : save(building with updatedElevator)
                    activate Persistence

                    Persistence - -> Repository : Success
                    deactivate Persistence

                Repository - -> ElevatorService : Success
                deactivate Repository

                ElevatorService -> BuildingMapper : toDTO(building with updatedElevator)
                activate BuildingMapper
                
                    BuildingMapper -> ElevatorDTO : updatedElevator as DTO
                    activate ElevatorDTO

                    ElevatorDTO - -> BuildingMapper : buildingDTO with updatedElevator
                    deactivate ElevatorDTO

                BuildingMapper - -> ElevatorService : buildingDTO with updatedElevator
                deactivate BuildingMapper

                ElevatorService - -> Controller : buildingDTO with updatedElevator
                deactivate ElevatorService

            else if building not found or elevator not found
                ElevatorService - -> Controller : Failure(Building or Elevator not found)
            end

    Controller - -> Routing : buildingDTO with updatedElevator / error message
    deactivate Controller

[o<- -o Routing : buildingDTO with updatedElevator / error message
deactivate Routing

@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 BST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Client VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>
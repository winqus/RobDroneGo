<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1034px" preserveAspectRatio="none" style="width:1598px;height:1034px;background:#FFFFFF;" version="1.1" viewBox="0 0 1598 1034" width="1598px" zoomAndPan="magnify"><defs/><g><rect fill="#ADD8E6" height="1022.6016" style="stroke:#181818;stroke-width:0.5;" width="1326" x="266" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="138" x="860" y="19.4951">Campus Management</text><rect fill="#00FFFF" height="1001.25" style="stroke:#181818;stroke-width:0.5;" width="223" x="266" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="189" x="283" y="40.8467">Framework And Drivers Layer</text><rect fill="#77FFAA" height="1001.25" style="stroke:#181818;stroke-width:0.5;" width="338" x="597" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="156" x="688" y="40.8467">Interface Adapters Layer</text><rect fill="#FF6666" height="1001.25" style="stroke:#181818;stroke-width:0.5;" width="194" x="1200" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="170" x="1212" y="40.8467">Application Business Rules</text><rect fill="#EEDDAA" height="1001.25" style="stroke:#181818;stroke-width:0.5;" width="186" x="1406" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="162" x="1418" y="40.8467">Enterprise Business Rules</text><rect fill="none" height="539.8125" style="stroke:#000000;stroke-width:1.5;" width="1203" x="335.5" y="365.4766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="310" x2="310" y1="80.3125" y2="989.9922"/><rect fill="#FFFFFF" height="861.3281" style="stroke:#181818;stroke-width:1.0;" width="10" x="305" y="110.6641"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="414" x2="414" y1="80.3125" y2="989.9922"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="409" y="292.7734"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="409" y="628.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="548" x2="548" y1="80.3125" y2="989.9922"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="639" x2="639" y1="80.3125" y2="989.9922"/><rect fill="#FFFFFF" height="800.625" style="stroke:#181818;stroke-width:1.0;" width="10" x="634" y="141.0156"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="746.5" x2="746.5" y1="80.3125" y2="989.9922"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="741.5" y="262.4219"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="741.5" y="598.2891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="873.5" x2="873.5" y1="80.3125" y2="989.9922"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="868.5" y="416.1797"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="991.5" x2="991.5" y1="80.3125" y2="989.9922"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="986.5" y="171.3672"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="986.5" y="750.0469"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1144.5" x2="1144.5" y1="80.3125" y2="989.9922"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="1139.5" y="476.8828"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="1139.5" y="719.6953"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1297" x2="1297" y1="80.3125" y2="989.9922"/><rect fill="#FFFFFF" height="609.0313" style="stroke:#181818;stroke-width:1.0;" width="10" x="1292" y="232.0703"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1499" x2="1499" y1="80.3125" y2="989.9922"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1494" y="507.2344"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="63" x="278.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="285.5" y="69.2363">Routing</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="351.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="358.5" y="69.2363">Floor Persistence</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="505" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="512" y="69.2363">Data Model</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="601" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="608" y="69.2363">Controller</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="687" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="694" y="69.2363">Floor Repository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115" x="816" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="823" y="69.2363">Building Service</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="951" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="958" y="69.2363">Floor DTO</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99" x="1095" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="1102" y="69.2363">Floor Mapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="1248" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="1255" y="69.2363">Floor Service</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47" x="1475.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="1482.5" y="69.2363">Floor</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="63" x="278.5" y="989.9922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="285.5" y="1011.5254">Routing</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="351.5" y="989.9922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="358.5" y="1011.5254">Floor Persistence</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="505" y="989.9922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="512" y="1011.5254">Data Model</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="601" y="989.9922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="608" y="1011.5254">Controller</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="687" y="989.9922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="694" y="1011.5254">Floor Repository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115" x="816" y="989.9922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="823" y="1011.5254">Building Service</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="951" y="989.9922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="958" y="1011.5254">Floor DTO</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99" x="1095" y="989.9922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="1102" y="1011.5254">Floor Mapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="1248" y="989.9922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="1255" y="1011.5254">Floor Service</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47" x="1475.5" y="989.9922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="1482.5" y="1011.5254">Floor</text><ellipse cx="10.5" cy="109.9141" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="293,106.6641,303,110.6641,293,114.6641,297,110.6641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="15" x2="299" y1="110.6641" y2="110.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="18" y="105.8076">PUT /floor/{floorId}</text><polygon fill="#181818" points="622,137.0156,632,141.0156,622,145.0156,626,141.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="315" x2="628" y1="141.0156" y2="141.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="322" y="136.1592">updateFloor(input)</text><polygon fill="#181818" points="974.5,167.3672,984.5,171.3672,974.5,175.3672,978.5,171.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="644" x2="980.5" y1="171.3672" y2="171.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="651" y="166.5107">input as FloorDTO</text><polygon fill="#181818" points="655,197.7188,645,201.7188,655,205.7188,651,201.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="649" x2="985.5" y1="201.7188" y2="201.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="661" y="196.8623">floorDTO</text><polygon fill="#181818" points="1280,228.0703,1290,232.0703,1280,236.0703,1284,232.0703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="644" x2="1286" y1="232.0703" y2="232.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="651" y="227.2139">updateFloor(floorDTO)</text><polygon fill="#181818" points="762.5,258.4219,752.5,262.4219,762.5,266.4219,758.5,262.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="756.5" x2="1291" y1="262.4219" y2="262.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="768.5" y="257.5654">exists(floorDTO)</text><polygon fill="#181818" points="430,288.7734,420,292.7734,430,296.7734,426,292.7734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="424" x2="740.5" y1="292.7734" y2="292.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="436" y="287.917">exists(floorDTO)</text><polygon fill="#181818" points="729.5,319.125,739.5,323.125,729.5,327.125,733.5,323.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="419" x2="735.5" y1="323.125" y2="323.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="426" y="318.2686">floorExistsResponse</text><polygon fill="#181818" points="1280,349.4766,1290,353.4766,1280,357.4766,1284,353.4766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="751.5" x2="1286" y1="353.4766" y2="353.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="758.5" y="348.6201">floorExistsResponse</text><path d="M335.5,365.4766 L396.5,365.4766 L396.5,373.8281 L386.5,383.8281 L335.5,383.8281 L335.5,365.4766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="539.8125" style="stroke:#000000;stroke-width:1.5;" width="1203" x="335.5" y="365.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="350.5" y="379.9717">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="192" x="411.5" y="378.8955">[if floor exists and building is valid]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="335.5" x2="1538.5" y1="860.1016" y2="860.1016"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="239" x="340.5" y="871.5205">[if floor does not exist or building is invalid]</text><polygon fill="#181818" points="889.5,412.1797,879.5,416.1797,889.5,420.1797,885.5,416.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="883.5" x2="1291" y1="416.1797" y2="416.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="246" x="895.5" y="411.3232">getBuildingByCode(floorDTO.buildingCode)</text><polygon fill="#181818" points="1280,442.5313,1290,446.5313,1280,450.5313,1284,446.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="878.5" x2="1286" y1="446.5313" y2="446.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="885.5" y="441.6748">buildingValidationResult</text><polygon fill="#181818" points="1160.5,472.8828,1150.5,476.8828,1160.5,480.8828,1156.5,476.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1154.5" x2="1291" y1="476.8828" y2="476.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="1166.5" y="472.0264">toDomain(floorDTO)</text><polygon fill="#181818" points="1482,503.2344,1492,507.2344,1482,511.2344,1486,507.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1149.5" x2="1488" y1="507.2344" y2="507.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="1156.5" y="502.3779">create from DTO</text><polygon fill="#181818" points="1160.5,533.5859,1150.5,537.5859,1160.5,541.5859,1156.5,537.5859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1154.5" x2="1493" y1="537.5859" y2="537.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="1166.5" y="532.7295">domainFloor</text><polygon fill="#181818" points="1280,563.9375,1290,567.9375,1280,571.9375,1284,567.9375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1149.5" x2="1286" y1="567.9375" y2="567.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="1156.5" y="563.0811">domainFloor</text><polygon fill="#181818" points="762.5,594.2891,752.5,598.2891,762.5,602.2891,758.5,598.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="756.5" x2="1291" y1="598.2891" y2="598.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="768.5" y="593.4326">save(domainFloor)</text><polygon fill="#181818" points="430,624.6406,420,628.6406,430,632.6406,426,628.6406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="424" x2="740.5" y1="628.6406" y2="628.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="436" y="623.7842">save(domainFloor)</text><polygon fill="#181818" points="729.5,654.9922,739.5,658.9922,729.5,662.9922,733.5,658.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="419" x2="735.5" y1="658.9922" y2="658.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="426" y="654.1357">updateConfirmation</text><polygon fill="#181818" points="1280,685.3438,1290,689.3438,1280,693.3438,1284,689.3438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="751.5" x2="1286" y1="689.3438" y2="689.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="758.5" y="684.4873">updateConfirmation</text><polygon fill="#181818" points="1160.5,715.6953,1150.5,719.6953,1160.5,723.6953,1156.5,719.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1154.5" x2="1291" y1="719.6953" y2="719.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="1166.5" y="714.8389">toDTO(domainFloor)</text><polygon fill="#181818" points="1007.5,746.0469,997.5,750.0469,1007.5,754.0469,1003.5,750.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1001.5" x2="1138.5" y1="750.0469" y2="750.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="1013.5" y="745.1904">domainFloor as DTO</text><polygon fill="#181818" points="1127.5,776.3984,1137.5,780.3984,1127.5,784.3984,1131.5,780.3984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="996.5" x2="1133.5" y1="780.3984" y2="780.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="1003.5" y="775.542">updatedFloorDTO</text><polygon fill="#181818" points="1280,806.75,1290,810.75,1280,814.75,1284,810.75" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1149.5" x2="1286" y1="810.75" y2="810.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="1156.5" y="805.8936">updatedFloorDTO</text><polygon fill="#181818" points="655,837.1016,645,841.1016,655,845.1016,651,841.1016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="649" x2="1291" y1="841.1016" y2="841.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="661" y="836.2451">updatedFloorDTO</text><polygon fill="#181818" points="655,893.2891,645,897.2891,655,901.2891,651,897.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="649" x2="1296" y1="897.2891" y2="897.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="661" y="892.4326">updateRejection(reason)</text><polygon fill="#181818" points="326,937.6406,316,941.6406,326,945.6406,322,941.6406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="320" x2="633" y1="941.6406" y2="941.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="281" x="332" y="936.7842">DTOWithUpdateStatus / updateRejectionReason</text><ellipse cx="10.5" cy="971.2422" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="27.5,967.9922,17.5,971.9922,27.5,975.9922,23.5,971.9922" style="stroke:#181818;stroke-width:1.0;"/><ellipse cx="304.5" cy="971.2422" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="25.5" x2="300" y1="971.9922" y2="971.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="281" x="28" y="967.1357">DTOWithUpdateStatus / updateRejectionReason</text><!--MD5=[58277457543da2a547ec7a3cc8dab8a3]
@startuml SD Lv3

!pragma teoz true

box "Campus Management" #LightBlue

    box "Framework And Drivers Layer" #00ffff
        participant Routing
        participant "Floor Persistence" as Persistence
    end box

    participant "Data Model" as Data
    box "Interface Adapters Layer" #77ffaa
        participant Controller
        participant "Floor Repository" as Repository
        participant "Building Service" as BuildingSvc
    end box

    participant "Floor DTO" as FloorDTO
    participant "Floor Mapper" as FloorMapper
    box "Application Business Rules" #ff6666
        participant "Floor Service" as FloorService
    end box

    box "Enterprise Business Rules" #eeddaa
        participant Floor
    end box
end box

[o-> Routing : PUT /floor/{floorId}
activate Routing

    Routing -> Controller : updateFloor(input)
    activate Controller

        Controller -> FloorDTO : input as FloorDTO
        activate FloorDTO

        FloorDTO - -> Controller : floorDTO
        deactivate FloorDTO

        Controller -> FloorService : updateFloor(floorDTO)
        activate FloorService
        
            FloorService -> Repository : exists(floorDTO)
            activate Repository

                Repository -> Persistence : exists(floorDTO)
                activate Persistence

                Persistence - -> Repository : floorExistsResponse
                deactivate Persistence

            Repository - -> FloorService : floorExistsResponse
            deactivate Repository

            alt if floor exists and building is valid

                FloorService -> BuildingSvc : getBuildingByCode(floorDTO.buildingCode)
                activate BuildingSvc

                    BuildingSvc - -> FloorService : buildingValidationResult
                    deactivate BuildingSvc

                FloorService -> FloorMapper : toDomain(floorDTO)
                activate FloorMapper

                    FloorMapper -> Floor : create from DTO
                    activate Floor

                    Floor - -> FloorMapper : domainFloor
                    deactivate Floor

                FloorMapper - -> FloorService : domainFloor
                deactivate FloorMapper

                FloorService -> Repository : save(domainFloor)
                activate Repository

                    Repository -> Persistence : save(domainFloor)
                    activate Persistence

                    Persistence - -> Repository : updateConfirmation
                    deactivate Persistence

                Repository - -> FloorService : updateConfirmation
                deactivate Repository

                FloorService -> FloorMapper : toDTO(domainFloor)
                activate FloorMapper
                
                    FloorMapper -> FloorDTO : domainFloor as DTO
                    activate FloorDTO

                    FloorDTO - -> FloorMapper : updatedFloorDTO
                    deactivate FloorDTO

                FloorMapper - -> FloorService : updatedFloorDTO
                deactivate FloorMapper

                FloorService - -> Controller : updatedFloorDTO
                deactivate FloorService

            else if floor does not exist or building is invalid
                FloorService - -> Controller : updateRejection(reason)
            end

    Controller - -> Routing : DTOWithUpdateStatus / updateRejectionReason
    deactivate Controller

[o<- -o Routing : DTOWithUpdateStatus / updateRejectionReason
deactivate Routing

@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 BST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Client VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>
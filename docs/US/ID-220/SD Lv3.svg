<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="822px" preserveAspectRatio="none" style="width:1533px;height:822px;background:#FFFFFF;" version="1.1" viewBox="0 0 1533 822" width="1533px" zoomAndPan="magnify"><defs/><g><rect fill="#ADD8E6" height="810.3047" style="stroke:#181818;stroke-width:0.5;" width="1475.5" x="51.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="138" x="720.25" y="19.4951">Campus Management</text><rect fill="#00FFFF" height="788.9531" style="stroke:#181818;stroke-width:0.5;" width="363" x="51.5" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="189" x="138.5" y="40.8467">Framework And Drivers Layer</text><rect fill="#77FFAA" height="788.9531" style="stroke:#181818;stroke-width:0.5;" width="364" x="522.5" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="156" x="626.5" y="40.8467">Interface Adapters Layer</text><rect fill="#FF6666" height="788.9531" style="stroke:#181818;stroke-width:0.5;" width="194" x="1104.5" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="170" x="1116.5" y="40.8467">Application Business Rules</text><rect fill="#EEDDAA" height="788.9531" style="stroke:#181818;stroke-width:0.5;" width="196" x="1331" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="162" x="1348" y="40.8467">Enterprise Business Rules</text><rect fill="none" height="314.5156" style="stroke:#000000;stroke-width:1.5;" width="1293" x="112.5" y="348.125"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="14" x2="14" y1="80.3125" y2="777.6953"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="87" x2="87" y1="80.3125" y2="777.6953"/><rect fill="#FFFFFF" height="649.0313" style="stroke:#181818;stroke-width:1.0;" width="10" x="82" y="110.6641"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="191" x2="191" y1="80.3125" y2="777.6953"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="186" y="429.1797"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="337" x2="337" y1="80.3125" y2="777.6953"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="332" y="232.0703"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="473.5" x2="473.5" y1="80.3125" y2="777.6953"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="564.5" x2="564.5" y1="80.3125" y2="777.6953"/><rect fill="#FFFFFF" height="588.3281" style="stroke:#181818;stroke-width:1.0;" width="10" x="559.5" y="141.0156"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="683" x2="683" y1="80.3125" y2="777.6953"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="678" y="201.7188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="823" x2="823" y1="80.3125" y2="777.6953"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="818" y="398.8281"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="943" x2="943" y1="80.3125" y2="777.6953"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="938" y="550.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1049" x2="1049" y1="80.3125" y2="777.6953"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="1044" y="520.2344"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1201.5" x2="1201.5" y1="80.3125" y2="777.6953"/><rect fill="#FFFFFF" height="527.625" style="stroke:#181818;stroke-width:1.0;" width="10" x="1196.5" y="171.3672"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1389.5" x2="1389.5" y1="80.3125" y2="777.6953"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1457.5" x2="1457.5" y1="80.3125" y2="777.6953"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="18" x="5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="12" y="69.2363"> </text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="63" x="55.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="62.5" y="69.2363">Routing</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="128.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="135.5" y="69.2363">Floor Persistence</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147" x="263.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="270.5" y="69.2363">Passage Persistence</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="430.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="437.5" y="69.2363">Data Model</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="526.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="533.5" y="69.2363">Controller</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="612.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="619.5" y="69.2363">Passage Repository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="763.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="770.5" y="69.2363">Floor Repository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="902.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="909.5" y="69.2363">Floor DTO</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99" x="999.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="1006.5" y="69.2363">Floor Mapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120" x="1141.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="1148.5" y="69.2363">Passage Service</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47" x="1366" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="1373" y="69.2363">Floor</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69" x="1423" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="1430" y="69.2363">Passage</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="18" x="5" y="777.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="12" y="799.2285"> </text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="63" x="55.5" y="777.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="62.5" y="799.2285">Routing</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="128.5" y="777.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="135.5" y="799.2285">Floor Persistence</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147" x="263.5" y="777.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="270.5" y="799.2285">Passage Persistence</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="430.5" y="777.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="437.5" y="799.2285">Data Model</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="526.5" y="777.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="533.5" y="799.2285">Controller</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="612.5" y="777.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="619.5" y="799.2285">Passage Repository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="763.5" y="777.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="770.5" y="799.2285">Floor Repository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="902.5" y="777.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="909.5" y="799.2285">Floor DTO</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99" x="999.5" y="777.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="1006.5" y="799.2285">Floor Mapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120" x="1141.5" y="777.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="1148.5" y="799.2285">Passage Service</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47" x="1366" y="777.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="1373" y="799.2285">Floor</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69" x="1423" y="777.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="1430" y="799.2285">Passage</text><ellipse cx="10.5" cy="109.9141" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="70,106.6641,80,110.6641,70,114.6641,74,110.6641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="15" x2="76" y1="110.6641" y2="110.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27" x="18" y="105.8076">Post</text><polygon fill="#181818" points="547.5,137.0156,557.5,141.0156,547.5,145.0156,551.5,141.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="92" x2="553.5" y1="141.0156" y2="141.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="327" x="99" y="136.1592">listFloorsWithPassagesToDifferentBuilding(buildingCode)</text><polygon fill="#181818" points="1184.5,167.3672,1194.5,171.3672,1184.5,175.3672,1188.5,171.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="569.5" x2="1190.5" y1="171.3672" y2="171.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="327" x="576.5" y="166.5107">listFloorsWithPassagesToDifferentBuilding(buildingCode)</text><polygon fill="#181818" points="699,197.7188,689,201.7188,699,205.7188,695,201.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="693" x2="1195.5" y1="201.7188" y2="201.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="269" x="705" y="196.8623">getPassagesToDiferentBuildings(buildingCode)</text><polygon fill="#181818" points="353,228.0703,343,232.0703,353,236.0703,349,232.0703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="347" x2="677" y1="232.0703" y2="232.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="269" x="359" y="227.2139">getPassagesToDiferentBuildings(buildingCode)</text><polygon fill="#181818" points="666,258.4219,676,262.4219,666,266.4219,670,262.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="342" x2="672" y1="262.4219" y2="262.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="349" y="257.5654">passage[]</text><polygon fill="#181818" points="1184.5,288.7734,1194.5,292.7734,1184.5,296.7734,1188.5,292.7734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="688" x2="1190.5" y1="292.7734" y2="292.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="695" y="287.917">passage[]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1206.5" x2="1248.5" y1="323.125" y2="323.125"/><line style="stroke:#181818;stroke-width:1.0;" x1="1248.5" x2="1248.5" y1="323.125" y2="336.125"/><line style="stroke:#181818;stroke-width:1.0;" x1="1207.5" x2="1248.5" y1="336.125" y2="336.125"/><polygon fill="#181818" points="1217.5,332.125,1207.5,336.125,1217.5,340.125,1213.5,336.125" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="1213.5" y="318.2686">listFloorsDTO = []</text><path d="M112.5,348.125 L185.5,348.125 L185.5,356.4766 L175.5,366.4766 L112.5,366.4766 L112.5,348.125 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="314.5156" style="stroke:#000000;stroke-width:1.5;" width="1293" x="112.5" y="348.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="127.5" y="362.6201">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="103" x="200.5" y="361.5439">[for each passage]</text><polygon fill="#181818" points="839,394.8281,829,398.8281,839,402.8281,835,398.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="833" x2="1195.5" y1="398.8281" y2="398.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="223" x="845" y="393.9717">getByCode(buildingCode, floorNumber)</text><polygon fill="#181818" points="207,425.1797,197,429.1797,207,433.1797,203,429.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="201" x2="817" y1="429.1797" y2="429.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="223" x="213" y="424.3232">getByCode(buildingCode, floorNumber)</text><polygon fill="#181818" points="806,455.5313,816,459.5313,806,463.5313,810,459.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="196" x2="812" y1="459.5313" y2="459.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="203" y="454.6748">floor</text><polygon fill="#181818" points="1184.5,485.8828,1194.5,489.8828,1184.5,493.8828,1188.5,489.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="828" x2="1190.5" y1="489.8828" y2="489.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="835" y="485.0264">floor</text><polygon fill="#181818" points="1065,516.2344,1055,520.2344,1065,524.2344,1061,520.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1059" x2="1195.5" y1="520.2344" y2="520.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="1071" y="515.3779">toDTO(floor)</text><polygon fill="#181818" points="959,546.5859,949,550.5859,959,554.5859,955,550.5859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="953" x2="1043" y1="550.5859" y2="550.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="965" y="545.7295">floor as DTO</text><polygon fill="#181818" points="1032,576.9375,1042,580.9375,1032,584.9375,1036,580.9375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="948" x2="1038" y1="580.9375" y2="580.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="955" y="576.0811">floorDTO</text><polygon fill="#181818" points="1184.5,607.2891,1194.5,611.2891,1184.5,615.2891,1188.5,611.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1054" x2="1190.5" y1="611.2891" y2="611.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="1061" y="606.4326">floorDTO</text><line style="stroke:#181818;stroke-width:1.0;" x1="1206.5" x2="1248.5" y1="641.6406" y2="641.6406"/><line style="stroke:#181818;stroke-width:1.0;" x1="1248.5" x2="1248.5" y1="641.6406" y2="654.6406"/><line style="stroke:#181818;stroke-width:1.0;" x1="1207.5" x2="1248.5" y1="654.6406" y2="654.6406"/><polygon fill="#181818" points="1217.5,650.6406,1207.5,654.6406,1217.5,658.6406,1213.5,654.6406" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="1213.5" y="636.7842">listFloorsDTO.push(floorDTO)</text><polygon fill="#181818" points="580.5,694.9922,570.5,698.9922,580.5,702.9922,576.5,698.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="574.5" x2="1195.5" y1="698.9922" y2="698.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="586.5" y="694.1357">listFloorsDTO</text><polygon fill="#181818" points="103,725.3438,93,729.3438,103,733.3438,99,729.3438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="97" x2="558.5" y1="729.3438" y2="729.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="109" y="724.4873">floorDTO[]</text><ellipse cx="10.5" cy="758.9453" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="27.5,755.6953,17.5,759.6953,27.5,763.6953,23.5,759.6953" style="stroke:#181818;stroke-width:1.0;"/><ellipse cx="81.5" cy="758.9453" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="25.5" x2="77" y1="759.6953" y2="759.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="28" y="754.8389">floorDTO[]</text><!--MD5=[042b3081f69227066a11d0fcec226633]
@startuml SD Lv3

!pragma teoz true

participant " "
box "Campus Management" #LightBlue

    box "Framework And Drivers Layer" #00ffff
        participant Routing
        participant "Floor Persistence" as FloorPers
        participant "Passage Persistence" as PassagePers
    end box

    participant "Data Model" as Data
    box "Interface Adapters Layer" #77ffaa
        participant Controller
        participant "Passage Repository" as PassageRepository
        participant "Floor Repository" as FloorRepo
    end box

    participant "Floor DTO" as FloorDTO
    participant "Floor Mapper" as FloorMapper
    box "Application Business Rules" #ff6666
        participant "Passage Service" as PassageService
    end box

    box "Enterprise Business Rules" #eeddaa
        participant Floor
        participant Passage
    end box
end box


[o-> Routing : Post
activate Routing

    Routing -> Controller : listFloorsWithPassagesToDifferentBuilding(buildingCode)
    activate Controller

        Controller -> PassageService : listFloorsWithPassagesToDifferentBuilding(buildingCode)
        activate PassageService

            PassageService -> PassageRepository : getPassagesToDiferentBuildings(buildingCode)
            activate PassageRepository

                PassageRepository -> PassagePers : getPassagesToDiferentBuildings(buildingCode)
                activate PassagePers

                PassagePers - -> PassageRepository : passage[]
                deactivate PassagePers

            PassageRepository - -> PassageService : passage[]
            deactivate PassageRepository

            PassageService -> PassageService : listFloorsDTO = []

            loop for each passage 
                
                PassageService -> FloorRepo: getByCode(buildingCode, floorNumber)
                activate FloorRepo

                    FloorRepo -> FloorPers: getByCode(buildingCode, floorNumber)
                    activate FloorPers

                    FloorPers - -> FloorRepo: floor
                    deactivate FloorPers

                FloorRepo - -> PassageService: floor
                deactivate FloorRepo

                PassageService -> FloorMapper: toDTO(floor)
                activate FloorMapper

                    FloorMapper -> FloorDTO: floor as DTO
                    activate FloorDTO

                    FloorDTO - -> FloorMapper: floorDTO
                    deactivate FloorDTO

                FloorMapper -> PassageService: floorDTO
                deactivate FloorMapper

                PassageService -> PassageService: listFloorsDTO.push(floorDTO)


            end

            PassageService - -> Controller : listFloorsDTO
            deactivate PassageService

    Controller - -> Routing : floorDTO[]
    deactivate Controller

[o<- -o Routing : floorDTO[]
deactivate Routing


@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 BST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>
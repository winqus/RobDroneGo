<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1319px" preserveAspectRatio="none" style="width:1651px;height:1319px;background:#FFFFFF;" version="1.1" viewBox="0 0 1651 1319" width="1651px" zoomAndPan="magnify"><defs/><g><rect fill="#ADD8E6" height="1307.25" style="stroke:#181818;stroke-width:0.5;" width="1459.5" x="185.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="138" x="846.25" y="19.4951">Campus Management</text><rect fill="#00FFFF" height="1285.8984" style="stroke:#181818;stroke-width:0.5;" width="228" x="185.5" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="189" x="205" y="40.8467">Framework And Drivers Layer</text><rect fill="#77FFAA" height="1285.8984" style="stroke:#181818;stroke-width:0.5;" width="461" x="521.5" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="156" x="674" y="40.8467">Interface Adapters Layer</text><rect fill="#FF6666" height="1285.8984" style="stroke:#181818;stroke-width:0.5;" width="194" x="1253" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="170" x="1265" y="40.8467">Application Business Rules</text><rect fill="#EEDDAA" height="1285.8984" style="stroke:#181818;stroke-width:0.5;" width="186" x="1459" y="27.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="162" x="1471" y="40.8467">Enterprise Business Rules</text><rect fill="none" height="854.8125" style="stroke:#000000;stroke-width:1.5;" width="1441.5" x="186" y="365.4766"/><rect fill="none" height="479.1094" style="stroke:#000000;stroke-width:1.5;" width="1397.5" x="205" y="640.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="221" x2="221" y1="80.3125" y2="1274.6406"/><rect fill="#FFFFFF" height="1145.9766" style="stroke:#181818;stroke-width:1.0;" width="10" x="216" y="110.6641"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="336" x2="336" y1="80.3125" y2="1274.6406"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="331" y="292.7734"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="331" y="446.5313"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="331" y="567.9375"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="331" y="782.3984"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="472.5" x2="472.5" y1="80.3125" y2="1274.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="563.5" x2="563.5" y1="80.3125" y2="1274.6406"/><rect fill="#FFFFFF" height="1098.2734" style="stroke:#181818;stroke-width:1.0;" width="10" x="558.5" y="141.0156"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="779" x2="779" y1="80.3125" y2="1274.6406"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="774" y="262.4219"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="774" y="752.0469"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="919" x2="919" y1="80.3125" y2="1274.6406"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="914" y="416.1797"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="914" y="537.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1050" x2="1050" y1="80.3125" y2="1274.6406"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1045" y="171.3672"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1045" y="903.8047"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1181" x2="1181" y1="80.3125" y2="1274.6406"/><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="1176" y="873.4531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1350" x2="1350" y1="80.3125" y2="1274.6406"/><rect fill="#FFFFFF" height="1007.2188" style="stroke:#181818;stroke-width:1.0;" width="10" x="1345" y="232.0703"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1552" x2="1552" y1="80.3125" y2="1274.6406"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1547" y="691.3438"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="63" x="189.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="196.5" y="69.2363">Routing</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147" x="262.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="269.5" y="69.2363">Passage Persistence</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="429.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="436.5" y="69.2363">Data Model</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="525.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="532.5" y="69.2363">Controller</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="708.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="715.5" y="69.2363">Passage Repository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="859.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="866.5" y="69.2363">Floor Repository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="998.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="1005.5" y="69.2363">Passage DTO</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="121" x="1120.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="1127.5" y="69.2363">Passage Mapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120" x="1290" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="1297" y="69.2363">Passage Service</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69" x="1517.5" y="47.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="1524.5" y="69.2363">Passage</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="63" x="189.5" y="1274.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="196.5" y="1296.1738">Routing</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147" x="262.5" y="1274.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="269.5" y="1296.1738">Passage Persistence</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="429.5" y="1274.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="436.5" y="1296.1738">Data Model</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="525.5" y="1274.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="532.5" y="1296.1738">Controller</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="708.5" y="1274.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="715.5" y="1296.1738">Passage Repository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="859.5" y="1274.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="866.5" y="1296.1738">Floor Repository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="998.5" y="1274.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="1005.5" y="1296.1738">Passage DTO</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="121" x="1120.5" y="1274.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="1127.5" y="1296.1738">Passage Mapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120" x="1290" y="1274.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="1297" y="1296.1738">Passage Service</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69" x="1517.5" y="1274.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="1524.5" y="1296.1738">Passage</text><ellipse cx="10.5" cy="109.9141" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="204,106.6641,214,110.6641,204,114.6641,208,110.6641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="15" x2="210" y1="110.6641" y2="110.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="18" y="105.8076">Post /passage</text><polygon fill="#181818" points="546.5,137.0156,556.5,141.0156,546.5,145.0156,550.5,141.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="226" x2="552.5" y1="141.0156" y2="141.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="233" y="136.1592">createPassage(input)</text><polygon fill="#181818" points="1033,167.3672,1043,171.3672,1033,175.3672,1037,171.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="568.5" x2="1039" y1="171.3672" y2="171.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="575.5" y="166.5107">input as PassageDTO</text><polygon fill="#181818" points="579.5,197.7188,569.5,201.7188,579.5,205.7188,575.5,201.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="573.5" x2="1044" y1="201.7188" y2="201.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="585.5" y="196.8623">passageDTO</text><polygon fill="#181818" points="1333,228.0703,1343,232.0703,1333,236.0703,1337,232.0703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="568.5" x2="1339" y1="232.0703" y2="232.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="575.5" y="227.2139">createPassage(passageDTO)</text><polygon fill="#181818" points="795,258.4219,785,262.4219,795,266.4219,791,262.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="789" x2="1344" y1="262.4219" y2="262.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="409" x="801" y="257.5654">findByCodes(passageDTO.buildingCode1, passageDTO.buildingCode2)</text><polygon fill="#181818" points="352,288.7734,342,292.7734,352,296.7734,348,292.7734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="346" x2="773" y1="292.7734" y2="292.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="409" x="358" y="287.917">findByCodes(passageDTO.buildingCode1, passageDTO.buildingCode2)</text><polygon fill="#181818" points="762,319.125,772,323.125,762,327.125,766,323.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="341" x2="768" y1="323.125" y2="323.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="348" y="318.2686">passageExists</text><polygon fill="#181818" points="1333,349.4766,1343,353.4766,1333,357.4766,1337,353.4766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="784" x2="1339" y1="353.4766" y2="353.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="791" y="348.6201">passageExists</text><path d="M186,365.4766 L247,365.4766 L247,373.8281 L237,383.8281 L186,383.8281 L186,365.4766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="854.8125" style="stroke:#000000;stroke-width:1.5;" width="1441.5" x="186" y="365.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="201" y="379.9717">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="147" x="262" y="378.8955">[if passage does not exist]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="186" x2="1627.5" y1="1144.75" y2="1144.75"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="92" x="191" y="1156.1689">[passage exists]</text><polygon fill="#181818" points="935,412.1797,925,416.1797,935,420.1797,931,416.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="929" x2="1344" y1="416.1797" y2="416.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="397" x="941" y="411.3232">findByCode(passageDTO.buildingCode1, passageDTO.floorNumber1)</text><polygon fill="#181818" points="352,442.5313,342,446.5313,352,450.5313,348,446.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="346" x2="913" y1="446.5313" y2="446.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="397" x="358" y="441.6748">findByCode(passageDTO.buildingCode1, passageDTO.floorNumber1)</text><polygon fill="#181818" points="902,472.8828,912,476.8828,902,480.8828,906,476.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="341" x2="908" y1="476.8828" y2="476.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="348" y="472.0264">floor1Exists</text><polygon fill="#181818" points="1333,503.2344,1343,507.2344,1333,511.2344,1337,507.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="924" x2="1339" y1="507.2344" y2="507.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="931" y="502.3779">floor1Exists</text><polygon fill="#181818" points="935,533.5859,925,537.5859,935,541.5859,931,537.5859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="929" x2="1344" y1="537.5859" y2="537.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="397" x="941" y="532.7295">findByCode(passageDTO.buildingCode2, passageDTO.floorNumber2)</text><polygon fill="#181818" points="352,563.9375,342,567.9375,352,571.9375,348,567.9375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="346" x2="913" y1="567.9375" y2="567.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="397" x="358" y="563.0811">findByCode(passageDTO.buildingCode2, passageDTO.floorNumber2)</text><polygon fill="#181818" points="902,594.2891,912,598.2891,902,602.2891,906,598.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="341" x2="908" y1="598.2891" y2="598.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="348" y="593.4326">floor2Exists</text><polygon fill="#181818" points="1333,624.6406,1343,628.6406,1333,632.6406,1337,628.6406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="924" x2="1339" y1="628.6406" y2="628.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="931" y="623.7842">floor2Exists</text><path d="M205,640.6406 L266,640.6406 L266,648.9922 L256,658.9922 L205,658.9922 L205,640.6406 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="479.1094" style="stroke:#000000;stroke-width:1.5;" width="1397.5" x="205" y="640.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="220" y="655.1357">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="109" x="281" y="654.0596">[if both floors exist]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="205" x2="1602.5" y1="1044.2109" y2="1044.2109"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="116" x="210" y="1055.6299">[floor does not exist]</text><polygon fill="#181818" points="1535,687.3438,1545,691.3438,1535,695.3438,1539,691.3438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1355" x2="1541" y1="691.3438" y2="691.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="1362" y="686.4873">create(passageDTO)</text><polygon fill="#181818" points="1366,717.6953,1356,721.6953,1366,725.6953,1362,721.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1360" x2="1546" y1="721.6953" y2="721.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="1372" y="716.8389">passage</text><polygon fill="#181818" points="795,748.0469,785,752.0469,795,756.0469,791,752.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="789" x2="1344" y1="752.0469" y2="752.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="801" y="747.1904">save(passage)</text><polygon fill="#181818" points="352,778.3984,342,782.3984,352,786.3984,348,782.3984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="346" x2="773" y1="782.3984" y2="782.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="358" y="777.542">save(passage)</text><polygon fill="#181818" points="762,808.75,772,812.75,762,816.75,766,812.75" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="341" x2="768" y1="812.75" y2="812.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="348" y="807.8936">SavedSuccessfully</text><polygon fill="#181818" points="1333,839.1016,1343,843.1016,1333,847.1016,1337,843.1016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="784" x2="1339" y1="843.1016" y2="843.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="791" y="838.2451">SavedSuccessfully</text><polygon fill="#181818" points="1197,869.4531,1187,873.4531,1197,877.4531,1193,873.4531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1191" x2="1344" y1="873.4531" y2="873.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="1203" y="868.5967">toDTO(passage)</text><polygon fill="#181818" points="1066,899.8047,1056,903.8047,1066,907.8047,1062,903.8047" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1060" x2="1175" y1="903.8047" y2="903.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="1072" y="898.9482">passage as DTO</text><polygon fill="#181818" points="1164,930.1563,1174,934.1563,1164,938.1563,1168,934.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1055" x2="1170" y1="934.1563" y2="934.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="1062" y="929.2998">passageDTO</text><polygon fill="#181818" points="1333,960.5078,1343,964.5078,1333,968.5078,1337,964.5078" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1186" x2="1339" y1="964.5078" y2="964.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="1193" y="959.6514">passageDTO</text><polygon fill="#181818" points="579.5,990.8594,569.5,994.8594,579.5,998.8594,575.5,994.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="573.5" x2="1344" y1="994.8594" y2="994.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="585.5" y="990.0029">passageDTO</text><polygon fill="#181818" points="237,1021.2109,227,1025.2109,237,1029.2109,233,1025.2109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="231" x2="557.5" y1="1025.2109" y2="1025.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="243" y="1020.3545">passageDTO</text><polygon fill="#181818" points="579.5,1077.3984,569.5,1081.3984,579.5,1085.3984,575.5,1081.3984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="573.5" x2="1344" y1="1081.3984" y2="1081.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="313" x="585.5" y="1076.542">Failure(Floor does not exist or Building does not exist)</text><polygon fill="#181818" points="237,1107.75,227,1111.75,237,1115.75,233,1111.75" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="231" x2="557.5" y1="1111.75" y2="1111.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="308" x="243" y="1106.8936">Error "Floor does not exist or Building does not exist"</text><polygon fill="#181818" points="579.5,1177.9375,569.5,1181.9375,579.5,1185.9375,575.5,1181.9375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="573.5" x2="1344" y1="1181.9375" y2="1181.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="585.5" y="1177.0811">Failure(Passage already exists)</text><polygon fill="#181818" points="237,1208.2891,227,1212.2891,237,1216.2891,233,1212.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="231" x2="557.5" y1="1212.2891" y2="1212.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="243" y="1207.4326">Error "Passage already exists"</text><ellipse cx="10.5" cy="1255.8906" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="27.5,1252.6406,17.5,1256.6406,27.5,1260.6406,23.5,1256.6406" style="stroke:#181818;stroke-width:1.0;"/><ellipse cx="215.5" cy="1255.8906" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="25.5" x2="211" y1="1256.6406" y2="1256.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="28" y="1251.7842">Response (passageDTO or Error)</text><!--MD5=[aaa1e596903b65cb78160bf99279d594]
@startuml SD Lv3

!pragma teoz true

box "Campus Management" #LightBlue

    box "Framework And Drivers Layer" #00ffff
        participant Routing
        participant "Passage Persistence" as Persistence
    end box

    participant "Data Model" as Data
    box "Interface Adapters Layer" #77ffaa
        participant Controller
        participant "Passage Repository" as Repository
        participant "Floor Repository" as FloorRepository
    end box

    participant "Passage DTO" as PassageDTO
    participant "Passage Mapper" as PassageMapper
    box "Application Business Rules" #ff6666
        participant "Passage Service" as PassageService
    end box

    box "Enterprise Business Rules" #eeddaa
        participant Passage
    end box
end box

[o-> Routing : Post /passage
activate Routing

    Routing -> Controller : createPassage(input)
    activate Controller

        Controller -> PassageDTO : input as PassageDTO
        activate PassageDTO

        PassageDTO - -> Controller : passageDTO
        deactivate PassageDTO

        Controller -> PassageService : createPassage(passageDTO)
        activate PassageService
        
            PassageService -> Repository : findByCodes(passageDTO.buildingCode1, passageDTO.buildingCode2)
            activate Repository

                Repository -> Persistence : findByCodes(passageDTO.buildingCode1, passageDTO.buildingCode2)
                activate Persistence

                Persistence - -> Repository : passageExists
                deactivate Persistence

            Repository - -> PassageService : passageExists
            deactivate Repository

            alt if passage does not exist

                PassageService -> FloorRepository : findByCode(passageDTO.buildingCode1, passageDTO.floorNumber1)
                activate FloorRepository

                    FloorRepository -> Persistence : findByCode(passageDTO.buildingCode1, passageDTO.floorNumber1)
                    activate Persistence

                    Persistence - -> FloorRepository : floor1Exists
                    deactivate Persistence

                FloorRepository - -> PassageService : floor1Exists
                deactivate FloorRepository

                PassageService -> FloorRepository : findByCode(passageDTO.buildingCode2, passageDTO.floorNumber2)
                activate FloorRepository

                    FloorRepository -> Persistence : findByCode(passageDTO.buildingCode2, passageDTO.floorNumber2)
                    activate Persistence

                    Persistence - -> FloorRepository : floor2Exists
                    deactivate Persistence

                FloorRepository - -> PassageService : floor2Exists
                deactivate FloorRepository

                alt if both floors exist
                    PassageService -> Passage : create(passageDTO)
                    activate Passage

                    Passage - -> PassageService : passage
                    deactivate Passage

                    PassageService -> Repository : save(passage)
                    activate Repository

                        Repository -> Persistence : save(passage)
                        activate Persistence

                        Persistence - -> Repository : SavedSuccessfully
                        deactivate Persistence

                    Repository - -> PassageService : SavedSuccessfully
                    deactivate Repository

                    PassageService -> PassageMapper : toDTO(passage)
                    activate PassageMapper

                        PassageMapper -> PassageDTO : passage as DTO
                        activate PassageDTO

                        PassageDTO - -> PassageMapper : passageDTO
                        deactivate PassageDTO

                    PassageMapper - -> PassageService : passageDTO
                    deactivate PassageMapper

                    PassageService - -> Controller : passageDTO
                    Controller - -> Routing : passageDTO
                else floor does not exist
                    PassageService - -> Controller : Failure(Floor does not exist or Building does not exist)
                    Controller - -> Routing : Error "Floor does not exist or Building does not exist"
                end

            else passage exists
                PassageService - -> Controller : Failure(Passage already exists)
                Controller - -> Routing : Error "Passage already exists"
            end
        deactivate PassageService

    deactivate Controller

[o<- -o Routing : Response (passageDTO or Error)
deactivate Routing

@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 BST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Client VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>